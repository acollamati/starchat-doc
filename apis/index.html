<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>APIs - StarChat Documentation</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">StarChat Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="active">
                        <a href="./">APIs</a>
                    </li>
                    <li >
                        <a href="../about/">About</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../about/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#apis">APIs</a></li>
            <li><a href="#systemindexmanagement">SystemIndexManagement</a></li>
            <li><a href="#user">User</a></li>
            <li><a href="#decisiontable">DecisionTable</a></li>
            <li><a href="#questionanswer-knowledgebase-priordata-conversationlogs">QuestionAnswer (KnowledgeBase, PriorData, ConversationLogs)</a></li>
            <li><a href="#termsextraction">TermsExtraction</a></li>
            <li><a href="#languageguesser">LanguageGuesser</a></li>
            <li><a href="#indexmanagement">IndexManagement</a></li>
            <li><a href="#term">Term</a></li>
            <li><a href="#tokenizers">Tokenizers</a></li>
            <li><a href="#analyzersplayground">AnalyzersPlayground</a></li>
            <li><a href="#spellcheck">SpellCheck</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="apis">APIs</h1>
<h2 id="systemindexmanagement">SystemIndexManagement</h2>
<h3 id="post-system_index_managementcreate">POST /system_index_management/create</h3>
<p>Create a new system index, this operation init. a new system index and is required 
to start using starchat.</p>
<p>Output JSON</p>
<h4 id="requirements">Requirements</h4>
<ul>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="sample-call">Sample call</h4>
<pre><code class="bash">PORT=&quot;${1:-8888}&quot;
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/system_index_management/create&quot;
</code></pre>

<p>Sample response:</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;IndexCreation: user(starchat_system_0.user, true) refresh_decisiontable(starchat_system_0.refresh_decisiontable, true)&quot;
}
</code></pre>

<h3 id="get-system_index_management">GET /system_index_management</h3>
<p>Fetch and returns the informations about the system index</p>
<p>Output JSON</p>
<h4 id="requirements_1">Requirements</h4>
<ul>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="sample-call_1">Sample call</h4>
<pre><code class="bash">PORT=&quot;${1:-8888}&quot;
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET &quot;http://localhost:${PORT}/system_index_management&quot;
</code></pre>

<p>Sample response:</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;IndexCheck: user(starchat_system_0.user, true) refresh_decisiontable(starchat_system_0.refresh_decisiontable, true)&quot;
}
</code></pre>

<h3 id="delete-system_index_management">DELETE /system_index_management</h3>
<p>Delete a system index, this operation destroy any user created</p>
<p>Output JSON</p>
<h4 id="requirements_2">Requirements</h4>
<ul>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="sample-call_2">Sample call</h4>
<pre><code class="bash">PORT=&quot;${1:-8888}&quot;
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X DELETE &quot;http://localhost:${PORT}/system_index_management&quot;
</code></pre>

<p>Sample response:</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;IndexDeletion: user(starchat_system_0.user, true) refresh_decisiontable(starchat_system_0.refresh_decisiontable, true)&quot;
}
</code></pre>

<h2 id="user">User</h2>
<h3 id="post-user">POST /user</h3>
<p>Insert a new user to the system, the user record can be generated 
using the '/user_gen/test_user' endpoint</p>
<p>Output JSON</p>
<h4 id="requirements_3">Requirements</h4>
<ul>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="sample-call_3">Sample call</h4>
<pre><code class="bash">PORT=&quot;${1:-8888}&quot;
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/user -d '{
        &quot;id&quot;: &quot;test_user&quot;,
        &quot;password&quot;: &quot;3c98bf19cb962ac4cd0227142b3495ab1be46534061919f792254b80c0f3e566f7819cae73bdc616af0ff555f7460ac96d88d56338d659ebd93e2be858ce1cf9&quot;, 
        &quot;salt&quot;: &quot;salt&quot;,
        &quot;permissions&quot;: {
                &quot;index_getjenny_english_0&quot;: [&quot;read&quot;, &quot;write&quot;]
        }
}'
</code></pre>

<p>Sample response:</p>
<pre><code class="json">{
   &quot;version&quot; : 1,
   &quot;created&quot; : true,
   &quot;index&quot; : &quot;starchat_system_0.user&quot;,
   &quot;dtype&quot; : &quot;user&quot;,
   &quot;id&quot; : &quot;test_user&quot;
}
</code></pre>

<h3 id="get-user">GET /user</h3>
<p>Fetch the informations about a user</p>
<p>Output JSON</p>
<h4 id="requirements_4">Requirements</h4>
<ul>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="sample-call_4">Sample call</h4>
<pre><code class="bash">PORT=&quot;${1:-8888}&quot;
USERNAME=${2:-&quot;admin&quot;}
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET http://localhost:${PORT}/user/${USERNAME}
</code></pre>

<p>Sample response:</p>
<pre><code class="json">{
   &quot;permissions&quot; : {
      &quot;admin&quot; : [
         &quot;admin&quot;
      ]
   },
   &quot;salt&quot; : &quot;salt2&quot;,
   &quot;id&quot; : &quot;admin&quot;,
   &quot;password&quot; : &quot;ce822ea3bd2ac45ed908f0fac0c81d95df7e59ad554ebed5e173113f5fb97a6c585803233136dd6b16b02742f50dd8cff6fac97ff827394e694f63198618e02c&quot;
}
</code></pre>

<h3 id="put-user">PUT /user</h3>
<p>Update a user record</p>
<p>Output JSON</p>
<h4 id="requirements_5">Requirements</h4>
<ul>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="sample-call_5">Sample call</h4>
<pre><code class="bash">PORT=&quot;${1:-8888}&quot;
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
 -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:${PORT}/user/test_user -d '{
        &quot;permissions&quot;: {
                &quot;index_getjenny_english_0&quot;: [&quot;read&quot;]
        }
}'
</code></pre>

<p>Sample response:</p>
<pre><code class="json">{
   &quot;version&quot; : 2,
   &quot;created&quot; : false,
   &quot;dtype&quot; : &quot;user&quot;,
   &quot;index&quot; : &quot;starchat_system_0.user&quot;,
   &quot;id&quot; : &quot;test_user&quot;
}
</code></pre>

<h3 id="delete-useruser_id">DELETE /user/user_id</h3>
<p>Delete an existing user</p>
<p>Output JSON</p>
<h4 id="requirements_6">Requirements</h4>
<ul>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="sample-call_6">Sample call</h4>
<pre><code class="bash">PORT=&quot;${1:-8888}&quot;
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X DELETE http://localhost:${PORT}/user/test_user 
</code></pre>

<p>Sample response:</p>
<pre><code class="json">{
   &quot;version&quot; : 10,
   &quot;dtype&quot; : &quot;user&quot;,
   &quot;id&quot; : &quot;test_user&quot;,
   &quot;index&quot; : &quot;starchat_system_0.user&quot;,
   &quot;found&quot; : true
}
</code></pre>

<h3 id="post-user_gentest_user">POST /user_gen/test_user</h3>
<p>Generate the record for a user with hashed password and a randomly generated salt.
The user must be then inserted into the system.</p>
<p>Output JSON</p>
<h4 id="requirements_7">Requirements</h4>
<ul>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="sample-call_7">Sample call</h4>
<pre><code class="bash">PORT=${1:-8888}

curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/user_gen/test_user -d '{
        &quot;password&quot;: &quot;plain text password&quot;,
        &quot;permissions&quot;: {
                &quot;index_getjenny_english_0&quot;: [&quot;read&quot;],
                &quot;index_finnish_1&quot;: [&quot;read&quot;, &quot;write&quot;]
        }
}'
</code></pre>

<p>Sample response:</p>
<pre><code class="json">{
   &quot;password&quot; : &quot;d4cc0586d5d9116e755f5011d2c03e627821c2596820236ef230ff094176586d05fbfa98a198aaa08935df2849196d2648012f1e40ff2e40ca8c3f627b41e9db&quot;,
   &quot;salt&quot; : &quot;qoKJUyUwpvWM53PI&quot;,
   &quot;id&quot; : &quot;test_user&quot;,
   &quot;permissions&quot; : {
      &quot;index_finnish_1&quot; : [
         &quot;read&quot;,
         &quot;write&quot;
      ],
      &quot;index_getjenny_english_0&quot; : [
         &quot;read&quot;
      ]
   }
}
</code></pre>

<h2 id="decisiontable">DecisionTable</h2>
<h3 id="post-get_next_response">POST /get_next_response</h3>
<p>Tell StarChat about the user actions (wrote something, clicked a button etc) and receives instruction 
about the next state.</p>
<p>Data to post:</p>
<pre><code class="json">{
  &quot;conversation_id&quot;: &quot;1234&quot;,
  &quot;user_input&quot;: { &quot;text&quot;: &quot;the text typed by the user&quot; }, // optional
  &quot;values&quot;: {
    &quot;return_value&quot;: &quot;the value either in success_value or in failure_value (Optional)&quot;, 
    &quot;data&quot;: {} // all the variables, e.g. for the STRING TEMPLATEs (Optional)
  },
  &quot;threshold&quot;: 0.0, // the minimum match threshold
  &quot;max_results&quot;: 4 // the max number of result to return
}

</code></pre>

<h4 id="requirements_8">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes">Return codes</h4>
<h5 id="200">200</h5>
<p>Similar Json, see examples below</p>
<h6 id="example-1">Example 1</h6>
<p>User input is "how to install starchat":</p>
<pre><code class="bash">QUERY=${1:-&quot;how to install starchat&quot;}
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
 -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/get_next_response -d &quot;{
        \&quot;conversation_id\&quot;: \&quot;1234\&quot;,
        \&quot;user_input\&quot;: { \&quot;text\&quot;: \&quot;${QUERY}\&quot; },
        \&quot;values\&quot;: {
                \&quot;return_value\&quot;: \&quot;\&quot;,
                \&quot;data\&quot;: {\&quot;varname1\&quot;: \&quot;value1\&quot;, \&quot;varname2\&quot;: \&quot;value2\&quot;}
        },
        \&quot;threshold\&quot;: 0.0,
        \&quot;max_results\&quot;: 4
}&quot;
</code></pre>

<p>returns:</p>
<pre><code class="json">[
   {
      &quot;bubble&quot; : &quot;Just choose one of the two:\n&lt;ul&gt;\n&lt;li&gt;docker install (recommended)&lt;/li&gt;\n&lt;li&gt;standalone install&lt;/li&gt;\n&lt;/ul&gt;&quot;,
      &quot;analyzer&quot; : &quot;band(bor(keyword(\&quot;setup\&quot;), keyword(\&quot;install.*\&quot;)), bnot(bor(keyword(\&quot;standalone\&quot;), keyword(\&quot;docker\&quot;))))&quot;,
      &quot;state_data&quot; : {},
      &quot;data&quot; : {
         &quot;varname1&quot; : &quot;value1&quot;,
         &quot;varname2&quot; : &quot;value2&quot;
      },
      &quot;failure_value&quot; : &quot;&quot;,
      &quot;state&quot; : &quot;install&quot;,
      &quot;traversed_states&quot; : [
         &quot;install&quot;
      ],
      &quot;conversation_id&quot; : &quot;1234&quot;,
      &quot;action&quot; : &quot;&quot;,
      &quot;action_input&quot; : {},
      &quot;score&quot; : 1,
      &quot;max_state_count&quot; : 0,
      &quot;success_value&quot; : &quot;&quot;
   }
]
</code></pre>

<h6 id="example-2">Example 2</h6>
<p>User input is: "how can I contribute to starchat?"</p>
<pre><code class="bash">QUERY=${1:-&quot;how can I contribute to starchat?&quot;}
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
 -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/get_next_response -d &quot;{
        \&quot;conversation_id\&quot;: \&quot;1234\&quot;,
        \&quot;user_input\&quot;: { \&quot;text\&quot;: \&quot;${QUERY}\&quot; },
        \&quot;values\&quot;: {
                \&quot;return_value\&quot;: \&quot;\&quot;,
                \&quot;data\&quot;: {\&quot;varname1\&quot;: \&quot;value1\&quot;, \&quot;varname2\&quot;: \&quot;value2\&quot;}
        },
        \&quot;threshold\&quot;: 0.0,
        \&quot;max_results\&quot;: 4
}&quot;
</code></pre>

<p>and gets:</p>
<pre><code class="json">[
   {
      &quot;analyzer&quot; : &quot;bor(keyword(\&quot;contribute\&quot;))&quot;,
      &quot;state_data&quot; : {},
      &quot;data&quot; : {
         &quot;varname2&quot; : &quot;value2&quot;,
         &quot;varname1&quot; : &quot;value1&quot;
      },
      &quot;traversed_states&quot; : [
         &quot;contribute&quot;
      ],
      &quot;conversation_id&quot; : &quot;1234&quot;,
      &quot;bubble&quot; : &quot;To contribute to &lt;a href=\&quot;http://git.io/*chat\&quot;&gt;StarChat&lt;/a&gt;, please send us a pull request from your fork of this repository.\n&lt;br&gt;Our concise contribution guideline contains the bare minimum requirements of the code contributions.\n&lt;br&gt;Before contributing (or opening issues), you might want to email us at starchat@getjenny.com.&quot;,
      &quot;action&quot; : &quot;&quot;,
      &quot;state&quot; : &quot;contribute&quot;,
      &quot;max_state_count&quot; : 0,
      &quot;score&quot; : 1,
      &quot;failure_value&quot; : &quot;&quot;,
      &quot;action_input&quot; : {},
      &quot;success_value&quot; : &quot;&quot;
   }
]
</code></pre>

<h5 id="204">204</h5>
<p>No response was found</p>
<h5 id="500-error">500 (error)</h5>
<p>Internal server error</p>
<h5 id="400-error">400 (error)</h5>
<p>Bad request: </p>
<ul>
<li>meaning: the input data structure is not valid</li>
<li>output data: no data returned</li>
</ul>
<h5 id="422-error">422 (error)</h5>
<ul>
<li>meaning: bad request data, the input data is formally valid but there is some issue with data interpretation</li>
<li>output data: the output data structure is a json dictionary with two fields: code and message. The following code are supported:</li>
<li>code: 100</li>
<li>message: "error evaluating the template strings, bad values"</li>
</ul>
<h5 id="404-error">404 (error)</h5>
<ul>
<li>meaning: not found</li>
<li>output data: no data returned</li>
</ul>
<h3 id="get-decisiontable">GET /decisiontable</h3>
<p>Get a document by ID</p>
<p>Output JSON</p>
<h4 id="requirements_9">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_1">Return codes</h4>
<h5 id="200_1">200</h5>
<p>Sample call</p>
<pre><code class="bash"># retrieve one or more entries with given ids; ids can be specified multiple times
PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
# retrieve one or more entries with given ids; ids can be specified multiple times
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; &quot;http://localhost:${PORT}/${INDEX_NAME}/decisiontable?ids=further_details_access_question&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;total&quot; : 1,
   &quot;hits&quot; : [
      {
         &quot;document&quot; : {
            &quot;failure_value&quot; : &quot;dont_understand&quot;,
            &quot;state&quot; : &quot;further_details_access_question&quot;,
            &quot;bubble&quot; : &quot;Can you specify which of the following problems you have? [NB works only if buttons can be shown!]&quot;,
            &quot;success_value&quot; : &quot;eval(show_buttons)&quot;,
            &quot;action_input&quot; : {
               &quot;I want to call an operator&quot; : &quot;call_operator&quot;,
               &quot;Forgot Password&quot; : &quot;forgot_password&quot;,
               &quot;Specify your problem&quot; : &quot;specify_problem&quot;,
               &quot;None of the above&quot; : &quot;start&quot;,
               &quot;Account locked&quot; : &quot;account_locked&quot;
            },
            &quot;max_state_count&quot; : 0,
            &quot;analyzer&quot; : &quot;or(and(or(keyword(\&quot;problem.*\&quot;),keyword(\&quot;issue.*\&quot;),keyword(\&quot;trouble.*\&quot;)),keyword(\&quot;account\&quot;)))&quot;,
            &quot;queries&quot; : [
               &quot;cannot access account&quot;,
               &quot;problem access account&quot;
            ],
            &quot;action&quot; : &quot;show_buttons&quot;,
            &quot;state_data&quot; : {
               &quot;verification&quot; : &quot;did you mean you can't access to your account?&quot;
            },
            &quot;execution_order&quot; : 1
         },
         &quot;score&quot; : 0
      }
   ],
   &quot;max_score&quot; : 0
}
</code></pre>

<h3 id="put-decisiontable">PUT /decisiontable</h3>
<p>Output JSON</p>
<h4 id="requirements_10">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_2">Return codes</h4>
<h5 id="201">201</h5>
<p>Sample call</p>
<pre><code class="bash"># update the &quot;further_details_access_question&quot; entry in the DT
PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
# update the &quot;further_details_access_question&quot; entry in the DT
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:${PORT}/${INDEX_NAME}/decisiontable/further_details_access_question -d '{
        &quot;queries&quot;: [&quot;cannot access account&quot;, &quot;problem access account&quot;, &quot;unable to access to my account&quot;, &quot;completely forgot my password&quot;]
}'
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;dtype&quot; : &quot;state&quot;,
   &quot;created&quot; : false,
   &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
   &quot;version&quot; : 2,
   &quot;id&quot; : &quot;further_details_access_question&quot;
}
</code></pre>

<h3 id="post-decisiontable">POST /decisiontable</h3>
<p>Insert a new document.</p>
<p>Output JSON</p>
<h4 id="requirements_11">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_3">Return codes</h4>
<h5 id="201_1">201</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/decisiontable -d '{
        &quot;state&quot;: &quot;further_details_access_question&quot;,
        &quot;max_state_count&quot;: 0,
        &quot;execution_order&quot;: 0,
        &quot;analyzer&quot;: &quot;&quot;,
        &quot;queries&quot;: [&quot;cannot access account&quot;, &quot;problem access account&quot;],
        &quot;bubble&quot;: &quot;What seems to be the problem exactly?&quot;,
        &quot;action&quot;: &quot;show_buttons&quot;,
        &quot;action_input&quot;: {&quot;Forgot Password&quot;: &quot;forgot_password&quot;, &quot;Account locked&quot;: &quot;account_locked&quot;, &quot;Payment problem&quot;: &quot;payment_problem&quot;, &quot;Specify your problem&quot;: &quot;specify_problem&quot;, &quot;I want to call an operator&quot;: &quot;call_operator&quot;, &quot;None of the above&quot;: &quot;start&quot;},
    &quot;state_data&quot;: {},
        &quot;success_value&quot;: &quot;eval(show_buttons)&quot;,
        &quot;failure_value&quot;: &quot;dont_understand&quot;
}'
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
    &quot;created&quot;: true,
    &quot;dtype&quot;: &quot;state&quot;,
    &quot;id&quot;: &quot;further_details_access_question&quot;,
    &quot;index&quot;: &quot;index_getjenny_english_0.state&quot;,
    &quot;version&quot;: 1
}
</code></pre>

<h3 id="delete-decisiontable">DELETE /decisiontable</h3>
<p>Delete a document by ID</p>
<p>Output JSON</p>
<h4 id="requirements_12">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_4">Return codes</h4>
<h5 id="200_2">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
 -H &quot;Content-Type: application/json&quot; -X DELETE http://localhost:${PORT}/${INDEX_NAME}/decisiontable/further_details_access_question
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
  &quot;dtype&quot;: &quot;state&quot;,
  &quot;version&quot;: 7,
  &quot;found&quot;: true,
  &quot;id&quot;: &quot;further_details_access_question&quot;,
  &quot;index&quot;:&quot;index_getjenny_english_0.state&quot;
}
</code></pre>

<p>Sample call: delete all</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
 -H &quot;Content-Type: application/json&quot; -X DELETE http://localhost:${PORT}/${INDEX_NAME}/decisiontable
</code></pre>

<p>Sample output: delete all</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;delete&quot;,
   &quot;deleted&quot; : 18
}
</code></pre>

<h3 id="post-decisiontable_upload_csv">POST /decisiontable_upload_csv</h3>
<p>upload load a csv file on decisiontable</p>
<p>Output JSON</p>
<h4 id="requirements_13">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_5">Return codes</h4>
<h5 id="201_2">201</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-'index_getjenny_english_0'}
FILENAME=${3:-&quot;`readlink -e ../../doc/decision_table_starchat_doc.csv`&quot;}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
 -X POST --form &quot;csv=@${FILENAME}&quot; http://localhost:8888/${INDEX_NAME}/decisiontable_upload_csv
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;data&quot; : [
      {
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;id&quot; : &quot;help&quot;,
         &quot;created&quot; : true,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1
      },
      {
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1,
         &quot;created&quot; : true,
         &quot;id&quot; : &quot;further_details_access_question&quot;,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;
      },
      {
         &quot;id&quot; : &quot;contribute&quot;,
         &quot;created&quot; : true,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1
      },
      {
         &quot;version&quot; : 1,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;created&quot; : true,
         &quot;id&quot; : &quot;quickstart&quot;
      },
      {
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;created&quot; : true,
         &quot;id&quot; : &quot;docker_install&quot;
      },
      {
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;id&quot; : &quot;create_es_indices&quot;,
         &quot;created&quot; : true
      },
      {
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1,
         &quot;id&quot; : &quot;delete_es_indexes&quot;,
         &quot;created&quot; : true,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;
      },
      {
         &quot;version&quot; : 1,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;created&quot; : true,
         &quot;id&quot; : &quot;create_es_indexes&quot;
      },
      {
         &quot;created&quot; : true,
         &quot;id&quot; : &quot;index_data&quot;,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1
      },
      {
         &quot;version&quot; : 1,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;id&quot; : &quot;index_analyzer&quot;,
         &quot;created&quot; : true,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;
      },
      {
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;id&quot; : &quot;load_conf_file&quot;,
         &quot;created&quot; : true,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1
      },
      {
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1,
         &quot;created&quot; : true,
         &quot;id&quot; : &quot;install&quot;,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;
      },
      {
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;id&quot; : &quot;standalone_install&quot;,
         &quot;created&quot; : true,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1
      },
      {
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;id&quot; : &quot;code_78&quot;,
         &quot;created&quot; : true
      },
      {
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;id&quot; : &quot;licence&quot;,
         &quot;created&quot; : true,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1
      },
      {
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;created&quot; : true,
         &quot;id&quot; : &quot;terrible_feedback&quot;,
         &quot;version&quot; : 1,
         &quot;dtype&quot; : &quot;state&quot;
      },
      {
         &quot;id&quot; : &quot;call_operator&quot;,
         &quot;created&quot; : true,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;version&quot; : 1
      },
      {
         &quot;version&quot; : 1,
         &quot;dtype&quot; : &quot;state&quot;,
         &quot;id&quot; : &quot;any_further&quot;,
         &quot;created&quot; : true,
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;
      },
      {
         &quot;index&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;id&quot; : &quot;dont_understand&quot;,
         &quot;created&quot; : true,
         &quot;version&quot; : 1,
         &quot;dtype&quot; : &quot;state&quot;
      }
   ]
}
</code></pre>

<h3 id="post-decisiontable_search">POST /decisiontable_search</h3>
<p>Update a document</p>
<p>Output JSON</p>
<h4 id="requirements_14">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_6">Return codes</h4>
<h5 id="200_3">200</h5>
<p>Sample call</p>
<pre><code class="bash">Q=&quot;${1:-'cannot access my account'}&quot;
S=&quot;${2:-0.0}&quot;
B=&quot;${3:-100.0}&quot;
PORT=${4:-8888}
INDEX_NAME=${5:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/decisiontable_search -d &quot;{
        \&quot;queries\&quot;: \&quot;${Q}\&quot;,
        \&quot;min_score\&quot;: ${S},
        \&quot;boost_exact_match_factor\&quot;: ${B},
        \&quot;from\&quot;: 0,
        \&quot;size\&quot;: 10
}&quot;
</code></pre>

<p>Sample response </p>
<pre><code class="json">{
   &quot;max_score&quot; : 140.38037109375,
   &quot;total&quot; : 1,
   &quot;hits&quot; : [
      {
         &quot;score&quot; : 140.38037109375,
         &quot;document&quot; : {
            &quot;action&quot; : &quot;show_buttons&quot;,
            &quot;state_data&quot; : {
               &quot;verification&quot; : &quot;did you mean you can't access to your account?&quot;
            },
            &quot;success_value&quot; : &quot;eval(show_buttons)&quot;,
            &quot;execution_order&quot; : 1,
            &quot;bubble&quot; : &quot;Can you specify which of the following problems you have? [NB works only if buttons can be shown!]&quot;,
            &quot;action_input&quot; : {
               &quot;None of the above&quot; : &quot;start&quot;,
               &quot;Forgot Password&quot; : &quot;forgot_password&quot;,
               &quot;I want to call an operator&quot; : &quot;call_operator&quot;,
               &quot;Specify your problem&quot; : &quot;specify_problem&quot;,
               &quot;Account locked&quot; : &quot;account_locked&quot;
            },
            &quot;queries&quot; : [
               &quot;cannot access account&quot;,
               &quot;problem access account&quot;
            ],
            &quot;failure_value&quot; : &quot;dont_understand&quot;,
            &quot;max_state_count&quot; : 0,
            &quot;analyzer&quot; : &quot;or(and(or(keyword(\&quot;problem.*\&quot;),keyword(\&quot;issue.*\&quot;),keyword(\&quot;trouble.*\&quot;)),keyword(\&quot;account\&quot;)))&quot;,
            &quot;state&quot; : &quot;further_details_access_question&quot;
         }
      }
   ]
}
</code></pre>

<h3 id="get-decisiontable_analyzer">GET /decisiontable_analyzer</h3>
<p>Get and return the map of analyzer for each state</p>
<p>Output JSON</p>
<h4 id="requirements_15">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_7">Return codes</h4>
<h5 id="200_4">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET &quot;http://localhost:${PORT}/${INDEX_NAME}/decisiontable_analyzer&quot;
</code></pre>

<p>Sample response</p>
<pre><code class="json">{
   &quot;analyzer_map&quot; : {
      &quot;help&quot; : {
         &quot;execution_order&quot; : 1,
         &quot;build&quot; : true,
         &quot;analyzer&quot; : &quot;band(keyword(\&quot;help\&quot;))&quot;
      },
      &quot;contribute&quot; : {
         &quot;build&quot; : true,
         &quot;analyzer&quot; : &quot;bor(keyword(\&quot;contribute\&quot;))&quot;,
         &quot;execution_order&quot; : 1
      },
      &quot;index_analyzer&quot; : {
         &quot;analyzer&quot; : &quot;band(bor(keyword(\&quot;index\&quot;),keyword(\&quot;load\&quot;)), keyword(\&quot;analyzer\&quot;))&quot;,
         &quot;build&quot; : true,
         &quot;execution_order&quot; : 1
      },
      &quot;further_details_access_question&quot; : {
         &quot;analyzer&quot; : &quot;or(and(or(keyword(\&quot;problem.*\&quot;),keyword(\&quot;issue.*\&quot;),keyword(\&quot;trouble.*\&quot;)),keyword(\&quot;account\&quot;)))&quot;,
         &quot;build&quot; : true,
         &quot;execution_order&quot; : 1
      },
      &quot;create_es_indices&quot; : {
         &quot;analyzer&quot; : &quot;band(keyword(\&quot;create\&quot;), keyword(\&quot;elastic.*\&quot;),  bor(keyword(\&quot;index\&quot;),  keyword(\&quot;indices\&quot;),  keyword(\&quot;indeces\&quot;),  keyword(\&quot;indexes\&quot;)))&quot;,
         &quot;build&quot; : true,
         &quot;execution_order&quot; : 1
      },
      &quot;create_es_indexes&quot; : {
         &quot;build&quot; : true,
         &quot;analyzer&quot; : &quot;band(keyword(\&quot;create\&quot;), bor(keyword(\&quot;index.*\&quot;), keyword(\&quot;indic.*\&quot;)))&quot;,
         &quot;execution_order&quot; : 1
      },
      &quot;call_operator&quot; : {
         &quot;analyzer&quot; : &quot;band(bor(keyword(\&quot;call\&quot;),keyword(\&quot;talk\&quot;),keyword(\&quot;speak\&quot;)),keyword(\&quot;operator\&quot;))&quot;,
         &quot;build&quot; : true,
         &quot;execution_order&quot; : 1
      },
      &quot;index_data&quot; : {
         &quot;execution_order&quot; : 1,
         &quot;analyzer&quot; : &quot;band(keyword(\&quot;index\&quot;), keyword(\&quot;data\&quot;))&quot;,
         &quot;build&quot; : true
      },
      &quot;install&quot; : {
         &quot;execution_order&quot; : 1,
         &quot;build&quot; : true,
         &quot;analyzer&quot; : &quot;band(bor(keyword(\&quot;setup\&quot;), keyword(\&quot;install.*\&quot;)), bnot(bor(keyword(\&quot;standalone\&quot;), keyword(\&quot;docker\&quot;))))&quot;
      },
      &quot;load_conf_file&quot; : {
         &quot;execution_order&quot; : 1,
         &quot;analyzer&quot; : &quot;band(keyword(\&quot;load.*\&quot;), bor(keyword(\&quot;config.*\&quot;), band(keyword(\&quot;decision\&quot;), keyword(\&quot;table\&quot;))), keyword(\&quot;file.*\&quot;))&quot;,
         &quot;build&quot; : true
      },
      &quot;docker_install&quot; : {
         &quot;execution_order&quot; : 1,
         &quot;analyzer&quot; : &quot;band(keyword(\&quot;docker\&quot;), keyword(\&quot;install.*\&quot;))&quot;,
         &quot;build&quot; : true
      },
      &quot;delete_es_indexes&quot; : {
         &quot;execution_order&quot; : 1,
         &quot;build&quot; : true,
         &quot;analyzer&quot; : &quot;band(keyword(\&quot;delete\&quot;), bor(keyword(\&quot;index.*\&quot;), keyword(\&quot;indic.*\&quot;)))&quot;
      },
      &quot;code_78&quot; : {
         &quot;analyzer&quot; : &quot;band(keyword(\&quot;code\&quot;),keyword(\&quot;78\&quot;))&quot;,
         &quot;build&quot; : true,
         &quot;execution_order&quot; : 1
      },
      &quot;terrible_feedback&quot; : {
         &quot;execution_order&quot; : 1,
         &quot;build&quot; : true,
         &quot;analyzer&quot; : &quot;booleanor(keyword(\&quot;idiot\&quot;), keyword(\&quot;fuck.*\&quot;), keyword(\&quot;screw\&quot;), keyword(\&quot;damn.*\&quot;), keyword(\&quot;asshole\&quot;))&quot;
      },
      &quot;standalone_install&quot; : {
         &quot;analyzer&quot; : &quot;band(keyword(\&quot;standal.*\&quot;), keyword(\&quot;install\&quot;))&quot;,
         &quot;build&quot; : true,
         &quot;execution_order&quot; : 1
      },
      &quot;quickstart&quot; : {
         &quot;execution_order&quot; : 1,
         &quot;build&quot; : true,
         &quot;analyzer&quot; : &quot;band(bor(keyword(\&quot;start\&quot;), keyword(\&quot;quickstart\&quot;)), keyword(\&quot;starchat\&quot;))&quot;
      },
      &quot;licence&quot; : {
         &quot;build&quot; : true,
         &quot;analyzer&quot; : &quot;bor(band(keyword(\&quot;open\&quot;), keyword(\&quot;source\&quot;)), keyword(\&quot;opensource\&quot;), keyword(\&quot;licence\&quot;))&quot;,
         &quot;execution_order&quot; : 1
      }
   }
}
</code></pre>

<h3 id="post-decisiontable_analyzer">POST /decisiontable_analyzer</h3>
<p>Load/reload the map of analyzer from ES</p>
<p>Output JSON</p>
<h4 id="requirements_16">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_8">Return codes</h4>
<h5 id="200_5">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/decisiontable_analyzer&quot;
</code></pre>

<p>Sample response</p>
<pre><code class="json">{
   &quot;num_of_entries&quot; : 17
}
</code></pre>

<h2 id="questionanswer-knowledgebase-priordata-conversationlogs">QuestionAnswer (KnowledgeBase, PriorData, ConversationLogs)</h2>
<p>The following REST endpoints have the same syntax and semantic
for KnowledgeBase, PriorData, ConversationLogs.</p>
<p>The only difference is the route path component:
<em> KnowledgeBase: "knowledgebase"
</em> Priodata: "prior_data"
* ConversationLogs: "conversation_logs"</p>
<p>In the API description we will refer to this path component as <QAPath></p>
<h3 id="get">GET /<QAPath></h3>
<p>Return a document by ID</p>
<p>Output JSON</p>
<h4 id="requirements_17">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_9">Return codes</h4>
<h5 id="200_6">200</h5>
<p>Sample call</p>
<pre><code class="bash">ID=${1:-0}
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
# retrieve one or more entries with given ids; ids can be specified multiple times
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; &quot;http://localhost:${PORT}/${INDEX_NAME}/knowledgebase?ids=${ID}&quot;
</code></pre>

<p>Sample response</p>
<pre><code class="json">{
   &quot;max_score&quot; : 0,
   &quot;total&quot; : 1,
   &quot;hits&quot; : [
      {
         &quot;score&quot; : 0,
         &quot;document&quot; : {
            &quot;conversation&quot; : &quot;id:1000&quot;,
            &quot;id&quot; : &quot;0&quot;,
            &quot;status&quot; : 0,
            &quot;question_scored_terms&quot; : [
               [
                  &quot;thank&quot;,
          1.09
               ]
            ],
            &quot;verified&quot; : true,
            &quot;answer&quot; : &quot;you are welcome!&quot;,
            &quot;topics&quot; : &quot;t1 t2&quot;,
            &quot;doctype&quot; : &quot;normal&quot;,
            &quot;index_in_conversation&quot; : 1,
            &quot;question&quot; : &quot;thank you&quot;,
            &quot;question_negative&quot; : [
              &quot;thank you anyway&quot;
            ],
            &quot;state&quot; : &quot;&quot;
         }
      }
   ]
}
</code></pre>

<h3 id="post">POST /<QAPath></h3>
<p>Insert a new document</p>
<h4 id="requirements_18">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_10">Return codes</h4>
<h5 id="201_3">201</h5>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/knowledgebase -d '{
    &quot;id&quot;: &quot;0&quot;,
    &quot;conversation&quot;: &quot;id:1000&quot;,
    &quot;index_in_conversation&quot;: 1,
    &quot;question&quot;: &quot;thank you&quot;,
        &quot;question_negative&quot;: [&quot;ok, I will not talk with you anymore&quot;, &quot;thank you anyway&quot;],
    &quot;answer&quot;: &quot;you are welcome!&quot;,
    &quot;question_scored_terms&quot;: [
        [
            &quot;currently&quot;,
            1.0901874131103333
        ],
        [
            &quot;installing&quot;,
            2.11472759638322
        ],
        [
            &quot;mac&quot;,
            9.000484252244254
        ],
        [
            &quot;reset&quot;,
            4.34483238516225
        ],
        [
            &quot;app&quot;,
            1.2219061535961406
        ],
        [
            &quot;device&quot;,
            2.1679468390743414E-213
        ],
        [
            &quot;devices&quot;,
            4.1987625801077624E-268
        ]
    ],
    &quot;verified&quot;: true,
    &quot;topics&quot;: &quot;t1 t2&quot;,
    &quot;doctype&quot;: &quot;normal&quot;,
    &quot;state&quot;: &quot;&quot;,
    &quot;status&quot;: 0
}'
</code></pre>

<p>Sample response</p>
<pre><code class="json">{
   &quot;created&quot; : true,
   &quot;dtype&quot; : &quot;question&quot;,
   &quot;version&quot; : 1,
   &quot;index&quot; : &quot;index_getjenny_english_0.question&quot;,
   &quot;id&quot; : &quot;0&quot;
}
</code></pre>

<h3 id="delete">DELETE /<QAPath></h3>
<p>Delete a document by ID</p>
<p>Output JSON</p>
<h4 id="requirements_19">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_11">Return codes</h4>
<h5 id="200_7">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X DELETE http://localhost:${PORT}/${INDEX_NAME}/knowledgebase/0
</code></pre>

<p>Sample output</p>
<pre><code class="bash">{
    &quot;dtype&quot; : &quot;question&quot;,
    &quot;version&quot; : 5,
    &quot;found&quot; : false,
    &quot;id&quot; : &quot;0&quot;,
    &quot;index&quot; : &quot;index_getjenny_english_0.question&quot;
}
</code></pre>

<p>Sample call: delete all</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
 -H &quot;Content-Type: application/json&quot; -X DELETE http://localhost:${PORT}/${INDEX_NAME}/knowledgebase
</code></pre>

<p>Sample output: delete all</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;delete&quot;,
   &quot;deleted&quot; : 2
}
</code></pre>

<h3 id="put">PUT /<QAPath></h3>
<p>Update an existing document</p>
<p>Output JSON</p>
<h4 id="requirements_20">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_12">Return codes</h4>
<h5 id="200_8">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:${PORT}/${INDEX_NAME}/knowledgebase/0 -d '{
        &quot;conversation&quot;: &quot;id:1001&quot;,
        &quot;question&quot;: &quot;thank you&quot;,
        &quot;answer&quot;: &quot;you are welcome!&quot;,
        &quot;verified&quot;: true,
        &quot;topics&quot;: &quot;t1 t2&quot;,
        &quot;doctype&quot;: &quot;normal&quot;,
        &quot;state&quot;: &quot;&quot;,
        &quot;status&quot;: 0
}' 
</code></pre>

<p>Sample response</p>
<pre><code class="json">{
   &quot;dtype&quot; : &quot;question&quot;,
   &quot;index&quot; : &quot;index_getjenny_english_0.question&quot;,
   &quot;id&quot; : &quot;0&quot;,
   &quot;version&quot; : 4,
   &quot;created&quot; : false
}
</code></pre>

<h3 id="post-_search">POST /<QAPath>_search</h3>
<p>Output JSON</p>
<h4 id="requirements_21">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_13">Return codes</h4>
<h5 id="200_9">200</h5>
<p>Sample call</p>
<pre><code class="bash">QUERY=${1:-&quot;how are you?&quot;}
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/knowledgebase_search -d &quot;{
        \&quot;question\&quot;: \&quot;${QUERY}\&quot;,
        \&quot;doctype\&quot;: \&quot;normal\&quot;,
        \&quot;min_score\&quot;: 0.0
}&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;hits&quot; : [
      {
         &quot;document&quot; : {
            &quot;question_scored_terms&quot; : [
               [
                  &quot;currently&quot;,
                  1.09018741311033
               ],
               [
                  &quot;installing&quot;,
                  2.11472759638322
               ],
               [
                  &quot;mac&quot;,
                  9.00048425224425
               ],
               [
                  &quot;reset&quot;,
                  4.34483238516225
               ],
               [
                  &quot;app&quot;,
                  1.22190615359614
               ],
               [
                  &quot;device&quot;,
                  2.16794683907434e-213
               ],
               [
                  &quot;devices&quot;,
                  4.19876258010776e-268
               ]
            ],
            &quot;question&quot; : &quot;thank you&quot;,
            &quot;id&quot; : &quot;0&quot;,
            &quot;state&quot; : &quot;&quot;,
            &quot;conversation&quot; : &quot;id:1001&quot;,
            &quot;answer&quot; : &quot;you are welcome!&quot;,
            &quot;topics&quot; : &quot;t1 t2&quot;,
            &quot;index_in_conversation&quot; : 1,
            &quot;doctype&quot; : &quot;normal&quot;,
            &quot;status&quot; : 0,
            &quot;verified&quot; : true,
            &quot;question_negative&quot; : [
               &quot;ok, I will not talk with you anymore&quot;,
               &quot;thank you anyway&quot;
            ]
         },
         &quot;score&quot; : 0.287682086229324
      }
   ],
   &quot;total&quot; : 1,
   &quot;max_score&quot; : 0.287682086229324
}
</code></pre>

<h3 id="get-term_count">GET /term_count/<QAPath></h3>
<p>Count the occurrence of a term.</p>
<p>The endpoint supports the following query arguments:
<em> field: can be "answer" or "question" (optional, default question)
</em> stale: represent the max stale time in millis ; 0 means no cache (Optional)
* term: the term to count (mandatory)</p>
<p>Output JSON</p>
<h4 id="requirements_22">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_14">Return codes</h4>
<h5 id="200_10">200</h5>
<p>Sample call</p>
<pre><code class="bash">TERM=${1:-&quot;hello&quot;}
ROUTE=${2:-knowledgebase}
INDEX_NAME=${3:-index_getjenny_english_0}
FIELD=${4:-&quot;question&quot;}
PORT=${5:-8888}
curl -v -H &quot;Authorization: Basic $(echo -n 'test_user:p4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET &quot;http://localhost:${PORT}/${INDEX_NAME}/term_count/${ROUTE}?field=${FIELD}&amp;term=${TERM}&quot;
</code></pre>

<p>Sample response</p>
<pre><code class="json">{
   &quot;numDocs&quot; : 994,
   &quot;count&quot; : 1037
}
</code></pre>

<h3 id="get-dict_size">GET /dict_size/<QAPath></h3>
<p>Measure the dictionary size: number of unique terms on question and answer field</p>
<p>The endpoint supports the following query arguments:
* stale: represent the max stale time in millis ; 0 means no cache (Optional)</p>
<p>Output JSON</p>
<h4 id="requirements_23">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_15">Return codes</h4>
<h5 id="200_11">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
DATATYPE=${2:-knowledgebase}
INDEX_NAME=${3:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic $(echo -n 'test_user:p4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET &quot;http://localhost:${PORT}/${INDEX_NAME}/dict_size/${DATATYPE}&quot;
</code></pre>

<p>Sample response</p>
<pre><code class="json">{
   &quot;numDocs&quot; : 135865,
   &quot;answer&quot; : 9171,
   &quot;question&quot; : 25200,
   &quot;total&quot; : 29258
}
</code></pre>

<h3 id="get-total_terms">GET /total_terms/<QAPath></h3>
<p>calculate the total number of terms</p>
<p>The endpoint supports the following query arguments:
* stale: represent the max stale time in millis ; 0 means no cache (Optional)</p>
<p>Output JSON</p>
<h4 id="requirements_24">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_16">Return codes</h4>
<h5 id="200_12">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
DATATYPE=${3:-knowledgebase}
curl -v -H &quot;Authorization: Basic $(echo -n 'test_user:p4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET &quot;http://localhost:${PORT}/${INDEX_NAME}/total_terms/${DATATYPE}&quot;
</code></pre>

<p>Sample response</p>
<pre><code class="json">{
   &quot;question&quot; : 821982,
   &quot;numDocs&quot; : 135865,
   &quot;answer&quot; : 1098490
}
</code></pre>

<h3 id="get-cache">GET /cache/<QAPath></h3>
<p>return the cache counter parameters and the number of elements in cache</p>
<p>Output JSON</p>
<h4 id="requirements_25">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_17">Return codes</h4>
<h5 id="200_13">200</h5>
<p>Sample call</p>
<pre><code class="bash">INDEX_NAME=${1:-index_getjenny_english_0}
PORT=${2:-8888}
ROUTE=${3:-knowledgebase}
curl -v -H &quot;Authorization: Basic $(echo -n 'admin:adminp4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET http://localhost:${PORT}/${INDEX_NAME}/cache/${ROUTE} 
</code></pre>

<p>Sample response</p>
<pre><code class="json">[
   {
      &quot;totalTermsCacheMaxSize&quot; : 1000,
      &quot;countTermCacheMaxSize&quot; : 100000,
      &quot;dictSizeCacheMaxSize&quot; : 1000,
      &quot;cacheStealTimeMillis&quot; : 43200000
   },
   {
      &quot;countTermCacheSize&quot; : 0,
      &quot;dictSizeCacheSize&quot; : 0,
      &quot;totalTermsCacheSize&quot; : 0
   }
]
</code></pre>

<h3 id="post-cache">POST /cache/<QAPath></h3>
<p>set the cache counter parameters</p>
<p>Output JSON</p>
<h4 id="requirements_26">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_18">Return codes</h4>
<h5 id="200_14">200</h5>
<p>Sample call</p>
<pre><code class="bash">INDEX_NAME=${1:-index_getjenny_english_0}
PORT=${2:-8888}
ROUTE=${3:-knowledgebase}
curl -v -H &quot;Authorization: Basic $(echo -n 'admin:adminp4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/cache/${ROUTE} -d'{ 
    &quot;dictSizeCacheMaxSize&quot;: 1000,
    &quot;totalTermsCacheMaxSize&quot;: 1000,
    &quot;countTermCacheMaxSize&quot;: 100000,
    &quot;cacheStealTimeMillis&quot;: 43200000
}'
</code></pre>

<p>Sample response</p>
<pre><code class="json">{
   &quot;totalTermsCacheMaxSize&quot; : 1000,
   &quot;dictSizeCacheMaxSize&quot; : 1000,
   &quot;countTermCacheMaxSize&quot; : 100000,
   &quot;cacheStealTimeMillis&quot; : 43200000
}
</code></pre>

<h3 id="delete-cache">DELETE /cache/<QAPath></h3>
<p>reset the cache for counters</p>
<p>Output JSON</p>
<h4 id="requirements_27">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_19">Return codes</h4>
<h5 id="200_15">200</h5>
<p>Sample call</p>
<pre><code class="bash">INDEX_NAME=${1:-index_getjenny_english_0}
PORT=${2:-8888}
ROUTE=${3:-knowledgebase}
curl -v -H &quot;Authorization: Basic $(echo -n 'admin:adminp4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X DELETE http://localhost:${PORT}/${INDEX_NAME}/cache/${ROUTE}
</code></pre>

<p>Sample response</p>
<pre><code class="json">[
   {
      &quot;countTermCacheMaxSize&quot; : 100000,
      &quot;totalTermsCacheMaxSize&quot; : 1000,
      &quot;dictSizeCacheMaxSize&quot; : 1000,
      &quot;cacheStealTimeMillis&quot; : 43200000
   },
   {
      &quot;totalTermsCacheSize&quot; : 0,
      &quot;dictSizeCacheSize&quot; : 0,
      &quot;countTermCacheSize&quot; : 0
   }
]
</code></pre>

<h3 id="put-updateterms">PUT /updateTerms/<QAPath></h3>
<p>update the manaus terms for a QuestionAnswer document</p>
<p>Output JSON</p>
<h4 id="requirements_28">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The document to update must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_20">Return codes</h4>
<h5 id="200_16">200</h5>
<p>Sample call</p>
<pre><code class="bash">DOCID=${1:-0}
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
ROUTE=${4:-knowledgebase}
curl -v -H &quot;Authorization: Basic $(echo -n 'test_user:p4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:${PORT}/${INDEX_NAME}/updateTerms/${ROUTE} -d&quot;{
        \&quot;id\&quot;: \&quot;${DOCID}\&quot;
}&quot;
</code></pre>

<p>Sample response</p>
<pre><code class="json">[
   {
      &quot;id&quot; : &quot;0&quot;,
      &quot;created&quot; : false,
      &quot;dtype&quot; : &quot;question_answer&quot;,
      &quot;version&quot; : 2,
      &quot;index&quot; : &quot;index_getjenny_english_0.question_answer&quot;
   }
]

</code></pre>

<h3 id="get-updateterms">GET /updateTerms/<QAPath></h3>
<p>update the manaus terms for all the QuestionAnswer documents</p>
<p>Output JSON</p>
<h4 id="requirements_29">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The user has stream permissions on the index</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_21">Return codes</h4>
<h5 id="200_17">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
ROUTE=${3:-knowledgebase}
curl -v -H &quot;Authorization: Basic $(echo -n 'test_user:p4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET http://localhost:${PORT}/${INDEX_NAME}/updateTerms/${ROUTE} -d'{
        &quot;id&quot;: &quot;&quot;
}'
</code></pre>

<p>Sample response</p>
<pre><code class="json">{&quot;dtype&quot;:&quot;question_answer&quot;,&quot;version&quot;:2,&quot;id&quot;:&quot;3bcafc79400f201bcbb2e9290d60231fb096845d97cd3a83b032eab90a9b6f8f&quot;,&quot;index&quot;:&quot;index_getjenny_english_0.question_answer&quot;,&quot;created&quot;:false}
{&quot;dtype&quot;:&quot;question_answer&quot;,&quot;version&quot;:2,&quot;id&quot;:&quot;f5239013416fc98c558560659b00ec96e694df243aace574e9dd32166e982ccd&quot;,&quot;index&quot;:&quot;index_getjenny_english_0.question_answer&quot;,&quot;created&quot;:false}
{&quot;dtype&quot;:&quot;question_answer&quot;,&quot;version&quot;:2,&quot;id&quot;:&quot;23cb4dc14284b278867b743d6e7387a3ba20e96afb4a34ddf58a8397b173a24f&quot;,&quot;index&quot;:&quot;index_getjenny_english_0.question_answer&quot;,&quot;created&quot;:false}
{&quot;dtype&quot;:&quot;question_answer&quot;,&quot;version&quot;:2,&quot;id&quot;:&quot;5f948728fbca7617907ab4ad031020f9da214926f2fbe272295c799d568a3491&quot;,&quot;index&quot;:&quot;index_getjenny_english_0.question_answer&quot;,&quot;created&quot;:false}
{&quot;dtype&quot;:&quot;question_answer&quot;,&quot;version&quot;:2,&quot;id&quot;:&quot;cfb544023bcc1378a59695bc6135fb7b71bfcdaba6fb2429e151aba73b2774b8&quot;,&quot;index&quot;:&quot;index_getjenny_english_0.question_answer&quot;,&quot;created&quot;:false}
{&quot;dtype&quot;:&quot;question_answer&quot;,&quot;version&quot;:2,&quot;id&quot;:&quot;cce15f6984f473fe7534f9e0f699e5e11a61e39cbe82989818a023d626ea5e1f&quot;,&quot;index&quot;:&quot;index_getjenny_english_0.question_answer&quot;,&quot;created&quot;:false}
{&quot;dtype&quot;:&quot;question_answer&quot;,&quot;version&quot;:2,&quot;id&quot;:&quot;b37db2bef879f22d3792840efa1a41b1d46cdbee4af5ccb1b935b3c944732544&quot;,&quot;index&quot;:&quot;index_getjenny_english_0.question_answer&quot;,&quot;created&quot;:false}
</code></pre>

<h2 id="termsextraction">TermsExtraction</h2>
<h3 id="post-extractionfrequencies">POST /extraction/frequencies</h3>
<p>Extract term frequencies from a sentence
The fields of the data structure have the following meaning:</p>
<ul>
<li>commonOrSpecificSearchPrior: specify if the prior_data table is from the common index or is index specific. Values are COMMON or IDXSPECIFIC</li>
<li>commonOrSpecificSearchObserved: specify if the knowledgebase table is from the common index or is index specific. Values are COMMON or IDXSPECIFIC</li>
<li>observedDataSource: specify which table should be considered for observed data, values are KNOWLEDGEBASE or CONV_LOGS</li>
<li>fieldsPrior: specify the fields which must be considered, values are question, answer, all</li>
<li>fieldsObserved: specify the fields which must be considered, values are question, answer, all</li>
</ul>
<p>Output JSON</p>
<h4 id="requirements_30">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_22">Return codes</h4>
<h5 id="200_18">200</h5>
<p>Sample call</p>
<pre><code class="bash">QUERY=${1:-&quot;good morning, may I ask you a question?&quot;}
PORT=${2:-8888}
INDEX_NAME=${4:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic $(echo -n 'test_user:p4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/extraction/frequencies&quot; -d&quot;
{
        \&quot;text\&quot;: \&quot;${QUERY}\&quot;,
        \&quot;commonOrSpecificSearchPrior\&quot;: \&quot;COMMON\&quot;,
        \&quot;commonOrSpecificSearchObserved\&quot;: \&quot;IDXSPECIFIC\&quot;,
        \&quot;observedDataSource\&quot;: \&quot;KNOWLEDGEBASE\&quot;,
        \&quot;fieldsPrior\&quot;: \&quot;all\&quot;,
        \&quot;fieldsObserved\&quot;: \&quot;all\&quot;,
        \&quot;tokenizer\&quot;: \&quot;space_punctuation\&quot;
}&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;observedTotalTerms&quot; : 1920472,
   &quot;priorTotalTerms&quot; : 2311033,
   &quot;tokensFreq&quot; : [
      {
         &quot;observedFrequency&quot; : 1187,
         &quot;token&quot; : &quot;good&quot;,
         &quot;priorFrequency&quot; : 7024
      },
      {
         &quot;priorFrequency&quot; : 1228,
         &quot;token&quot; : &quot;morning&quot;,
         &quot;observedFrequency&quot; : 246
      },
      {
         &quot;priorFrequency&quot; : 1343,
         &quot;observedFrequency&quot; : 4185,
         &quot;token&quot; : &quot;may&quot;
      },
      {
         &quot;observedFrequency&quot; : 68554,
         &quot;token&quot; : &quot;i&quot;,
         &quot;priorFrequency&quot; : 79384
      },
      {
         &quot;priorFrequency&quot; : 1377,
         &quot;observedFrequency&quot; : 471,
         &quot;token&quot; : &quot;ask&quot;
      },
      {
         &quot;priorFrequency&quot; : 93571,
         &quot;observedFrequency&quot; : 79470,
         &quot;token&quot; : &quot;you&quot;
      },
      {
         &quot;priorFrequency&quot; : 47701,
         &quot;token&quot; : &quot;a&quot;,
         &quot;observedFrequency&quot; : 25688
      },
      {
         &quot;observedFrequency&quot; : 539,
         &quot;token&quot; : &quot;question&quot;,
         &quot;priorFrequency&quot; : 525
      }
   ]
}
</code></pre>

<h3 id="post-extractionfrequencies_1">POST /extraction/frequencies</h3>
<p>Extract manaus terms from a sentence
The fields of the data structure have the following meaning:</p>
<ul>
<li>commonOrSpecificSearchPrior: specify if the prior_data table is from the common index or is index specific. Values are COMMON or IDXSPECIFIC</li>
<li>commonOrSpecificSearchObserved: specify if the knowledgebase table is from the common index or is index specific. Values are COMMON or IDXSPECIFIC</li>
<li>observedDataSource: specify which table should be considered for observed data, values are KNOWLEDGEBASE or CONV_LOGS</li>
<li>fieldsPrior: specify the fields which must be considered, values are question, answer, all</li>
<li>fieldsObserved: specify the fields which must be considered, values are question, answer, all</li>
</ul>
<p>Output JSON</p>
<h4 id="requirements_31">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_23">Return codes</h4>
<h5 id="200_19">200</h5>
<p>Sample call</p>
<pre><code class="bash">QUERY=${1:-&quot;good morning, may I ask you a question?&quot;}
PORT=${2:-8888}
INDEX_NAME=${4:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic $(echo -n 'test_user:p4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/extraction/keywords&quot; -d &quot;
{
        \&quot;text\&quot;: \&quot;${QUERY}\&quot;,
        \&quot;commonOrSpecificSearchPrior\&quot;: \&quot;COMMON\&quot;,
        \&quot;commonOrSpecificSearchObserved\&quot;: \&quot;IDXSPECIFIC\&quot;,
        \&quot;observedDataSource\&quot;: \&quot;KNOWLEDGEBASE\&quot;,
        \&quot;fieldsPrior\&quot;: \&quot;all\&quot;,
        \&quot;fieldsObserved\&quot;: \&quot;all\&quot;,
        \&quot;minWordsPerSentence\&quot;: 5,
        \&quot;pruneTermsThreshold\&quot;: 100000,
        \&quot;misspellMaxOccurrence\&quot;: 10,
        \&quot;activePotentialDecay\&quot;: 1,
        \&quot;activePotential\&quot;: true,
        \&quot;totalInfo\&quot;: true
}
&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;question&quot; : 0.229660917208135
}
</code></pre>

<h3 id="post-extractionsynonyms">POST /extraction/synonyms</h3>
<p>Tokenize a sentence, extract terms and decorate each term with manaus informations and the possible synonyms using a vector model.
The fields of the data structure have the following meaning:</p>
<ul>
<li>text: the text to analyze</li>
<li>tokenizer: the tokenizer, default is "base"</li>
<li>sentencesThreshold: discard sentences if the sentence with the synonym is below the threshold, default us 0.0</li>
<li>synonymsThresholds: discard the synonyms if the distance is below the threshold, default is 0.0</li>
<li>distanceFunction: a distance function values are SUMCOSINE (sum of word vectors) or EMDCOSINE (Earth movers distance)</li>
<li>commonOrSpecificSearchTerms: specify if the terms table is from the common index or is index specific. Values are COMMON or IDXSPECIFIC</li>
<li>commonOrSpecificSearchPrior: specify if the prior_data table is from the common index or is index specific. Values are COMMON or IDXSPECIFIC</li>
<li>commonOrSpecificSearchObserved: specify if the knowledgebase table is from the common index or is index specific. Values are COMMON or IDXSPECIFIC</li>
<li>observedDataSource: specify which table should be considered for observed data, values are KNOWLEDGEBASE or CONV_LOGS</li>
<li>fieldsPrior: specify the fields which must be considered, values are question, answer, all</li>
<li>fieldsObserved: specify the fields which must be considered, values are question, answer, all</li>
<li>minWordsPerSentence: manaus parameter, ignore sentences with less than N terms, default is 10</li>
<li>pruneTermsThreshold: manaus parameter, a threshold on the number of terms for trigger pruning, default value is 100000</li>
<li>misspellMaxOccurrence: manaus parameter, discard terms with a frequency below the threshold, default is 5</li>
<li>activePotentialDecay: manaus parameter, a decay value for the active potential</li>
<li>activePotential: manaus parameter, tell wether to calculate the active potential or not, default is true</li>
<li>minSentenceInfoBit: min number of information bits for the sentence</li>
<li>minKeywordInfo: min number of information bits for a word</li>
<li>totalInfo: manaus parameter, tell wether to consider the total info or not, default is true</li>
</ul>
<p>Output JSON</p>
<h4 id="requirements_32">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_24">Return codes</h4>
<h5 id="200_20">200</h5>
<p>Sample call</p>
<pre><code class="bash">QUERY=${1:-&quot;good morning, may I ask you a question?&quot;}
PORT=${2:-8888}
INDEX_NAME=${4:-index_getjenny_english_0}

curl -v -H &quot;Authorization: Basic $(echo -n 'test_user:p4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/extraction/synonyms&quot; -d &quot;
{
        \&quot;text\&quot;: \&quot;${QUERY}\&quot;,
        \&quot;tokenizer\&quot;: \&quot;base\&quot;,
        \&quot;sentencesThreshold\&quot;: 0.9,
        \&quot;synonymsThresholds\&quot;: 0.3,
        \&quot;distanceFunction\&quot;: \&quot;EMDCOSINE\&quot;,
        \&quot;commonOrSpecificSearchPrior\&quot;: \&quot;COMMON\&quot;,
        \&quot;commonOrSpecificSearchObserved\&quot;: \&quot;IDXSPECIFIC\&quot;,
        \&quot;observedDataSource\&quot;: \&quot;KNOWLEDGEBASE\&quot;,
        \&quot;fieldsPrior\&quot;: \&quot;all\&quot;,
        \&quot;fieldsObserved\&quot;: \&quot;all\&quot;,
        \&quot;minWordsPerSentence\&quot;: 5,
        \&quot;pruneTermsThreshold\&quot;: 100000,
        \&quot;misspellMaxOccurrence\&quot;: 10,
        \&quot;activePotentialDecay\&quot;: 1,
        \&quot;activePotential\&quot;: true,
        \&quot;totalInfo\&quot;: true
}
&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">[
   {
      &quot;synonymItem&quot; : [
         {
            &quot;termSimilarityScore&quot; : 0.303461623209445,
            &quot;synonym&quot; : &quot;serious&quot;,
            &quot;synonymScore&quot; : 0.988391942416316,
            &quot;textDistanceWithSynonym&quot; : 0.988391942416316
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.98686397528116,
            &quot;synonymScore&quot; : 0.98686397528116,
            &quot;synonym&quot; : &quot;safe&quot;,
            &quot;termSimilarityScore&quot; : 0.310671998517923
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.986168126185455,
            &quot;synonymScore&quot; : 0.986168126185455,
            &quot;synonym&quot; : &quot;effective&quot;,
            &quot;termSimilarityScore&quot; : 0.337205437720856
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.985984970241292,
            &quot;synonymScore&quot; : 0.985984970241292,
            &quot;termSimilarityScore&quot; : 0.30013467985373,
            &quot;synonym&quot; : &quot;salutary&quot;
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.985895039899644,
            &quot;synonymScore&quot; : 0.985895039899644,
            &quot;termSimilarityScore&quot; : 0.301306430755499,
            &quot;synonym&quot; : &quot;dear&quot;
         },
         {
            &quot;termSimilarityScore&quot; : 0.319592899798586,
            &quot;synonym&quot; : &quot;estimable&quot;,
            &quot;synonymScore&quot; : 0.985759252837724,
            &quot;textDistanceWithSynonym&quot; : 0.985759252837724
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.985249380845675,
            &quot;synonymScore&quot; : 0.985249380845675,
            &quot;synonym&quot; : &quot;thoroughly&quot;,
            &quot;termSimilarityScore&quot; : 0.337964488042003
         },
         {
            &quot;termSimilarityScore&quot; : 0.360057098563907,
            &quot;synonym&quot; : &quot;right&quot;,
            &quot;synonymScore&quot; : 0.984778611750602,
            &quot;textDistanceWithSynonym&quot; : 0.984778611750602
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.984227558357218,
            &quot;synonymScore&quot; : 0.984227558357218,
            &quot;synonym&quot; : &quot;adept&quot;,
            &quot;termSimilarityScore&quot; : 0.330252861229703
         },
         {
            &quot;termSimilarityScore&quot; : 0.360657543519664,
            &quot;synonym&quot; : &quot;expert&quot;,
            &quot;synonymScore&quot; : 0.984204967194361,
            &quot;textDistanceWithSynonym&quot; : 0.984204967194361
         },
         {
            &quot;synonymScore&quot; : 0.9839801846329,
            &quot;textDistanceWithSynonym&quot; : 0.9839801846329,
            &quot;termSimilarityScore&quot; : 0.387968844459879,
            &quot;synonym&quot; : &quot;full&quot;
         },
         {
            &quot;synonymScore&quot; : 0.983341764529566,
            &quot;textDistanceWithSynonym&quot; : 0.983341764529566,
            &quot;termSimilarityScore&quot; : 0.307056458999165,
            &quot;synonym&quot; : &quot;skilful&quot;
         },
         {
            &quot;synonym&quot; : &quot;secure&quot;,
            &quot;termSimilarityScore&quot; : 0.386750372411043,
            &quot;synonymScore&quot; : 0.9828697525105,
            &quot;textDistanceWithSynonym&quot; : 0.9828697525105
         },
         {
            &quot;termSimilarityScore&quot; : 0.436633496912848,
            &quot;synonym&quot; : &quot;near&quot;,
            &quot;textDistanceWithSynonym&quot; : 0.9823153867721,
            &quot;synonymScore&quot; : 0.9823153867721
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.98229857645758,
            &quot;synonymScore&quot; : 0.98229857645758,
            &quot;termSimilarityScore&quot; : 0.387852275460498,
            &quot;synonym&quot; : &quot;soundly&quot;
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.981854513089778,
            &quot;synonymScore&quot; : 0.981854513089778,
            &quot;termSimilarityScore&quot; : 0.375971735071977,
            &quot;synonym&quot; : &quot;sound&quot;
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.981012225642823,
            &quot;synonymScore&quot; : 0.981012225642823,
            &quot;termSimilarityScore&quot; : 0.349548530861366,
            &quot;synonym&quot; : &quot;unspoiled&quot;
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.980134947418645,
            &quot;synonymScore&quot; : 0.980134947418645,
            &quot;synonym&quot; : &quot;honorable&quot;,
            &quot;termSimilarityScore&quot; : 0.36656103347195
         },
         {
            &quot;synonym&quot; : &quot;ripe&quot;,
            &quot;termSimilarityScore&quot; : 0.361927513363036,
            &quot;synonymScore&quot; : 0.979828029318668,
            &quot;textDistanceWithSynonym&quot; : 0.979828029318668
         },
         {
            &quot;termSimilarityScore&quot; : 0.354594107764147,
            &quot;synonym&quot; : &quot;proficient&quot;,
            &quot;synonymScore&quot; : 0.97897497858666,
            &quot;textDistanceWithSynonym&quot; : 0.97897497858666
         },
         {
            &quot;synonym&quot; : &quot;commodity&quot;,
            &quot;termSimilarityScore&quot; : 0.400576579081682,
            &quot;synonymScore&quot; : 0.978353047238428,
            &quot;textDistanceWithSynonym&quot; : 0.978353047238428
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.978097513490299,
            &quot;synonymScore&quot; : 0.978097513490299,
            &quot;synonym&quot; : &quot;practiced&quot;,
            &quot;termSimilarityScore&quot; : 0.417713639606198
         },
         {
            &quot;synonym&quot; : &quot;unspoilt&quot;,
            &quot;termSimilarityScore&quot; : 0.344935826089365,
            &quot;textDistanceWithSynonym&quot; : 0.977965860781802,
            &quot;synonymScore&quot; : 0.977965860781802
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.977574200871494,
            &quot;synonymScore&quot; : 0.977574200871494,
            &quot;termSimilarityScore&quot; : 0.368691045104583,
            &quot;synonym&quot; : &quot;upright&quot;
         }
      ],
      &quot;isKeywordToken&quot; : false,
      &quot;keywordExtractionScore&quot; : 0,
      &quot;token&quot; : {
         &quot;position&quot; : 0,
         &quot;token&quot; : &quot;good&quot;,
         &quot;token_type&quot; : &quot;&lt;ALPHANUM&gt;&quot;,
         &quot;start_offset&quot; : 0,
         &quot;end_offset&quot; : 4
      }
   },
   {
      &quot;keywordExtractionScore&quot; : 0,
      &quot;token&quot; : {
         &quot;position&quot; : 1,
         &quot;end_offset&quot; : 12,
         &quot;token&quot; : &quot;morning&quot;,
         &quot;token_type&quot; : &quot;&lt;ALPHANUM&gt;&quot;,
         &quot;start_offset&quot; : 5
      },
      &quot;synonymItem&quot; : [
         {
            &quot;synonymScore&quot; : 0.982435251017214,
            &quot;textDistanceWithSynonym&quot; : 0.982435251017214,
            &quot;termSimilarityScore&quot; : 0.328796456566772,
            &quot;synonym&quot; : &quot;dawning&quot;
         },
         {
            &quot;termSimilarityScore&quot; : 0.320363553861273,
            &quot;synonym&quot; : &quot;sunup&quot;,
            &quot;textDistanceWithSynonym&quot; : 0.981187446721127,
            &quot;synonymScore&quot; : 0.981187446721127
         },
         {
            &quot;synonymScore&quot; : 0.980827133578433,
            &quot;textDistanceWithSynonym&quot; : 0.980827133578433,
            &quot;termSimilarityScore&quot; : 0.351556981730201,
            &quot;synonym&quot; : &quot;cockcrow&quot;
         },
         {
            &quot;synonym&quot; : &quot;dayspring&quot;,
            &quot;termSimilarityScore&quot; : 0.348148650582253,
            &quot;textDistanceWithSynonym&quot; : 0.98000434808506,
            &quot;synonymScore&quot; : 0.98000434808506
         },
         {
            &quot;synonym&quot; : &quot;morn&quot;,
            &quot;termSimilarityScore&quot; : 0.310762418953851,
            &quot;textDistanceWithSynonym&quot; : 0.979694497080588,
            &quot;synonymScore&quot; : 0.979694497080588
         },
         {
            &quot;synonymScore&quot; : 0.975365086887233,
            &quot;textDistanceWithSynonym&quot; : 0.975365086887233,
            &quot;synonym&quot; : &quot;aurora&quot;,
            &quot;termSimilarityScore&quot; : 0.403555992661807
         },
         {
            &quot;synonym&quot; : &quot;first_light&quot;,
            &quot;termSimilarityScore&quot; : 0.389117497640442,
            &quot;synonymScore&quot; : 0.973279032352032,
            &quot;textDistanceWithSynonym&quot; : 0.973279032352032
         }
      ],
      &quot;isKeywordToken&quot; : false
   },
   {
      &quot;keywordExtractionScore&quot; : 0,
      &quot;token&quot; : {
         &quot;position&quot; : 2,
         &quot;end_offset&quot; : 17,
         &quot;token&quot; : &quot;may&quot;,
         &quot;token_type&quot; : &quot;&lt;ALPHANUM&gt;&quot;,
         &quot;start_offset&quot; : 14
      },
      &quot;synonymItem&quot; : [
         {
            &quot;textDistanceWithSynonym&quot; : 0.977735408571704,
            &quot;synonymScore&quot; : 0.977735408571704,
            &quot;termSimilarityScore&quot; : 0.430110506850729,
            &quot;synonym&quot; : &quot;whitethorn&quot;
         }
      ],
      &quot;isKeywordToken&quot; : false
   },
   {
      &quot;keywordExtractionScore&quot; : 0,
      &quot;token&quot; : {
         &quot;position&quot; : 3,
         &quot;end_offset&quot; : 19,
         &quot;token_type&quot; : &quot;&lt;ALPHANUM&gt;&quot;,
         &quot;start_offset&quot; : 18,
         &quot;token&quot; : &quot;i&quot;
      },
      &quot;synonymItem&quot; : [
         {
            &quot;synonymScore&quot; : 0.990079660169983,
            &quot;textDistanceWithSynonym&quot; : 0.990079660169983,
            &quot;termSimilarityScore&quot; : 0.33685060765497,
            &quot;synonym&quot; : &quot;one&quot;
         },
         {
            &quot;termSimilarityScore&quot; : 0.402164830285073,
            &quot;synonym&quot; : &quot;single&quot;,
            &quot;textDistanceWithSynonym&quot; : 0.982443662914587,
            &quot;synonymScore&quot; : 0.982443662914587
         },
         {
            &quot;synonymScore&quot; : 0.978915403087889,
            &quot;textDistanceWithSynonym&quot; : 0.978915403087889,
            &quot;termSimilarityScore&quot; : 0.421938029658631,
            &quot;synonym&quot; : &quot;unity&quot;
         },
         {
            &quot;synonymScore&quot; : 0.976796274715053,
            &quot;textDistanceWithSynonym&quot; : 0.976796274715053,
            &quot;termSimilarityScore&quot; : 0.411104820586555,
            &quot;synonym&quot; : &quot;ace&quot;
         },
         {
            &quot;termSimilarityScore&quot; : 0.409793052227205,
            &quot;synonym&quot; : &quot;iodine&quot;,
            &quot;synonymScore&quot; : 0.971809310282386,
            &quot;textDistanceWithSynonym&quot; : 0.971809310282386
         },
         {
            &quot;synonymScore&quot; : 0.970492090788282,
            &quot;textDistanceWithSynonym&quot; : 0.970492090788282,
            &quot;synonym&quot; : &quot;ane&quot;,
            &quot;termSimilarityScore&quot; : 0.426139287692068
         }
      ],
      &quot;isKeywordToken&quot; : false
   },
   {
      &quot;isKeywordToken&quot; : false,
      &quot;synonymItem&quot; : [
         {
            &quot;termSimilarityScore&quot; : 0.344875478792656,
            &quot;synonym&quot; : &quot;involve&quot;,
            &quot;synonymScore&quot; : 0.985084402822893,
            &quot;textDistanceWithSynonym&quot; : 0.985084402822893
         },
         {
            &quot;synonym&quot; : &quot;require&quot;,
            &quot;termSimilarityScore&quot; : 0.313982723187962,
            &quot;synonymScore&quot; : 0.985048997600635,
            &quot;textDistanceWithSynonym&quot; : 0.985048997600635
         },
         {
            &quot;synonym&quot; : &quot;demand&quot;,
            &quot;termSimilarityScore&quot; : 0.340885896054422,
            &quot;textDistanceWithSynonym&quot; : 0.984973652020142,
            &quot;synonymScore&quot; : 0.984973652020142
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.984179229975704,
            &quot;synonymScore&quot; : 0.984179229975704,
            &quot;termSimilarityScore&quot; : 0.348080045767017,
            &quot;synonym&quot; : &quot;necessitate&quot;
         },
         {
            &quot;termSimilarityScore&quot; : 0.363270794438576,
            &quot;synonym&quot; : &quot;postulate&quot;,
            &quot;synonymScore&quot; : 0.980113837090212,
            &quot;textDistanceWithSynonym&quot; : 0.980113837090212
         }
      ],
      &quot;keywordExtractionScore&quot; : 0,
      &quot;token&quot; : {
         &quot;position&quot; : 4,
         &quot;end_offset&quot; : 23,
         &quot;token&quot; : &quot;ask&quot;,
         &quot;start_offset&quot; : 20,
         &quot;token_type&quot; : &quot;&lt;ALPHANUM&gt;&quot;
      }
   },
   {
      &quot;token&quot; : {
         &quot;position&quot; : 5,
         &quot;end_offset&quot; : 27,
         &quot;token&quot; : &quot;you&quot;,
         &quot;token_type&quot; : &quot;&lt;ALPHANUM&gt;&quot;,
         &quot;start_offset&quot; : 24
      },
      &quot;keywordExtractionScore&quot; : 0,
      &quot;synonymItem&quot; : [],
      &quot;isKeywordToken&quot; : false
   },
   {
      &quot;isKeywordToken&quot; : false,
      &quot;synonymItem&quot; : [
         {
            &quot;synonym&quot; : &quot;angstrom&quot;,
            &quot;termSimilarityScore&quot; : 0.389515130731534,
            &quot;synonymScore&quot; : 0.981827876880409,
            &quot;textDistanceWithSynonym&quot; : 0.981827876880409
         },
         {
            &quot;synonym&quot; : &quot;amp&quot;,
            &quot;termSimilarityScore&quot; : 0.410951525810052,
            &quot;synonymScore&quot; : 0.978805416352854,
            &quot;textDistanceWithSynonym&quot; : 0.978805416352854
         },
         {
            &quot;termSimilarityScore&quot; : 0.399132821680172,
            &quot;synonym&quot; : &quot;ampere&quot;,
            &quot;synonymScore&quot; : 0.978184525582464,
            &quot;textDistanceWithSynonym&quot; : 0.978184525582464
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.970833723014969,
            &quot;synonymScore&quot; : 0.970833723014969,
            &quot;synonym&quot; : &quot;adenine&quot;,
            &quot;termSimilarityScore&quot; : 0.417303913993053
         }
      ],
      &quot;keywordExtractionScore&quot; : 0,
      &quot;token&quot; : {
         &quot;end_offset&quot; : 29,
         &quot;start_offset&quot; : 28,
         &quot;token_type&quot; : &quot;&lt;ALPHANUM&gt;&quot;,
         &quot;token&quot; : &quot;a&quot;,
         &quot;position&quot; : 6
      }
   },
   {
      &quot;token&quot; : {
         &quot;token_type&quot; : &quot;&lt;ALPHANUM&gt;&quot;,
         &quot;start_offset&quot; : 30,
         &quot;token&quot; : &quot;question&quot;,
         &quot;end_offset&quot; : 38,
         &quot;position&quot; : 7
      },
      &quot;keywordExtractionScore&quot; : 0,
      &quot;isKeywordToken&quot; : false,
      &quot;synonymItem&quot; : [
         {
            &quot;termSimilarityScore&quot; : 0.302928140147459,
            &quot;synonym&quot; : &quot;doubtfulness&quot;,
            &quot;textDistanceWithSynonym&quot; : 0.986332041308894,
            &quot;synonymScore&quot; : 0.986332041308894
         },
         {
            &quot;textDistanceWithSynonym&quot; : 0.984752050785226,
            &quot;synonymScore&quot; : 0.984752050785226,
            &quot;synonym&quot; : &quot;interview&quot;,
            &quot;termSimilarityScore&quot; : 0.337223120697986
         },
         {
            &quot;synonym&quot; : &quot;enquiry&quot;,
            &quot;termSimilarityScore&quot; : 0.30268890030876,
            &quot;textDistanceWithSynonym&quot; : 0.983960314458422,
            &quot;synonymScore&quot; : 0.983960314458422
         },
         {
            &quot;synonym&quot; : &quot;interrogate&quot;,
            &quot;termSimilarityScore&quot; : 0.347190376576428,
            &quot;synonymScore&quot; : 0.982717754194259,
            &quot;textDistanceWithSynonym&quot; : 0.982717754194259
         },
         {
            &quot;termSimilarityScore&quot; : 0.402127027019405,
            &quot;synonym&quot; : &quot;head&quot;,
            &quot;textDistanceWithSynonym&quot; : 0.981584262241235,
            &quot;synonymScore&quot; : 0.981584262241235
         },
         {
            &quot;termSimilarityScore&quot; : 0.353450470156032,
            &quot;synonym&quot; : &quot;interrogation&quot;,
            &quot;textDistanceWithSynonym&quot; : 0.980529096104673,
            &quot;synonymScore&quot; : 0.980529096104673
         },
         {
            &quot;termSimilarityScore&quot; : 0.386000200471808,
            &quot;synonym&quot; : &quot;motion&quot;,
            &quot;textDistanceWithSynonym&quot; : 0.978495629389701,
            &quot;synonymScore&quot; : 0.978495629389701
         },
         {
            &quot;synonym&quot; : &quot;inquiry&quot;,
            &quot;termSimilarityScore&quot; : 0.314067668506634,
            &quot;textDistanceWithSynonym&quot; : 0.977996268442931,
            &quot;synonymScore&quot; : 0.977996268442931
         }
      ]
   }
]
</code></pre>

<h2 id="languageguesser">LanguageGuesser</h2>
<h3 id="post-language_guesser">POST /language_guesser</h3>
<p>Output JSON</p>
<h4 id="requirements_33">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_25">Return codes</h4>
<h5 id="200_21">200</h5>
<p>Sample call</p>
<pre><code class="bash">QUERY=${1:-&quot;good morning, may I ask you a question?&quot;}
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/language_guesser&quot; -d &quot;
{
        \&quot;input_text\&quot;: \&quot;${QUERY}\&quot;
}&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;enhough_text&quot; : false,
   &quot;language&quot; : &quot;en&quot;,
   &quot;confidence&quot; : &quot;MEDIUM&quot;,
   &quot;score&quot; : 0.571426689624786
}
</code></pre>

<h3 id="get-language_guesser">GET /language_guesser</h3>
<p>Check if a language is recognizable by the guesser</p>
<p>Output JSON</p>
<h4 id="requirements_34">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_26">Return codes</h4>
<h5 id="200_22">200</h5>
<p>Sample call</p>
<pre><code class="bash">LANG=${1:-en} 
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET &quot;http://localhost:${PORT}/${INDEX_NAME}/language_guesser/${LANG}&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;supported_languages&quot; : {
      &quot;languages&quot; : {
         &quot;en&quot; : true
      }
   }
}
</code></pre>

<h2 id="indexmanagement">IndexManagement</h2>
<h3 id="post-index_managementcreate">POST /index_management/create</h3>
<p>Output JSON</p>
<h4 id="requirements_35">Requirements</h4>
<ul>
<li>Index name must start with the "index_" prefix followed by a language, and a sequence of alphanumeric characters separated by underscore e.g. index_<LANG>_<SUFFIX></li>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="return-codes_27">Return codes</h4>
<h5 id="200_23">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/index_management/create&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;IndexCreation: state(index_getjenny_english_0.state, true) question(index_getjenny_english_0.question, true) term(index_getjenny_english_0.term, true)&quot;
}
</code></pre>

<h3 id="post-index_managementrefresh">POST /index_management/refresh</h3>
<p>Output JSON</p>
<h4 id="requirements_36">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_28">Return codes</h4>
<h5 id="200_24">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/index_management/refresh&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;results&quot; : [
      {
         &quot;failed_shards&quot; : [],
         &quot;successful_shards_n&quot; : 5,
         &quot;failed_shards_n&quot; : 0,
         &quot;index_name&quot; : &quot;index_getjenny_english_0.state&quot;,
         &quot;total_shards_n&quot; : 10
      },
      {
         &quot;failed_shards&quot; : [],
         &quot;total_shards_n&quot; : 10,
         &quot;index_name&quot; : &quot;index_getjenny_english_0.question&quot;,
         &quot;failed_shards_n&quot; : 0,
         &quot;successful_shards_n&quot; : 5
      },
      {
         &quot;failed_shards&quot; : [],
         &quot;successful_shards_n&quot; : 5,
         &quot;index_name&quot; : &quot;index_getjenny_english_0.term&quot;,
         &quot;failed_shards_n&quot; : 0,
         &quot;total_shards_n&quot; : 10
      }
   ]
}
</code></pre>

<h3 id="get-index_management">GET /index_management</h3>
<p>Output JSON</p>
<h4 id="requirements_37">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_29">Return codes</h4>
<h5 id="200_25">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET &quot;http://localhost:${PORT}/${INDEX_NAME}/index_management&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;IndexCheck: state(index_getjenny_english_0.state, true) question(index_getjenny_english_0.question, true) term(index_getjenny_english_0.term, true)&quot;
}
</code></pre>

<h3 id="put-index_management">PUT /index_management</h3>
<p>Output JSON</p>
<h4 id="requirements_38">Requirements</h4>
<ul>
<li>Index must exists</li>
<li>The function requires "admin" credentials</li>
</ul>
<h4 id="return-codes_30">Return codes</h4>
<h5 id="200_26">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
LANGUAGE=${3:-english}
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
 -H &quot;Content-Type: application/json&quot; -X PUT &quot;http://localhost:${PORT}/${INDEX_NAME}/${LANGUAGE}/index_management&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;IndexCheck: state(index_getjenny_english_0.state, true) question(index_getjenny_english_0.question, true) term(index_getjenny_english_0.term, true)&quot;
}
</code></pre>

<h3 id="delete-index_management">DELETE /index_management</h3>
<p>Output JSON</p>
<h4 id="requirements_39">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires admin credentials</li>
</ul>
<h4 id="return-codes_31">Return codes</h4>
<h5 id="200_27">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'admin:adminp4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X DELETE &quot;http://localhost:${PORT}/${INDEX_NAME}/index_management&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;IndexDeletion: state(index_getjenny_english_0.state, true) question(index_getjenny_english_0.question, true) term(index_getjenny_english_0.term, true)&quot;
}
</code></pre>

<h2 id="term">Term</h2>
<h3 id="post-termindex">POST /term/index</h3>
<p>Index the term as indicated in the JSON. </p>
<h4 id="requirements_40">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_32">Return codes</h4>
<h5 id="200_28">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/term/index -d '{
    &quot;terms&quot;: [
        {
            &quot;term&quot;: &quot;&quot;,
            &quot;frequency_base&quot;: 1.0,
            &quot;frequency_stem&quot;: 1.0,
            &quot;vector&quot;: [1.0, 2.0, 3.0],
            &quot;synonyms&quot;:
            {
                &quot;bla1&quot;: 0.1,
                &quot;bla2&quot;: 0.2
            },
            &quot;antonyms&quot;:
            {
                &quot;bla3&quot;: 0.1,
                &quot;bla4&quot;: 0.2
            },
            &quot;tags&quot;: &quot;tag1 tag2&quot;,
            &quot;features&quot;:
            {
                &quot;NUM&quot;: &quot;S&quot;,
                &quot;GEN&quot;: &quot;M&quot;
            }
        },
        {
            &quot;term&quot;: &quot;term2&quot;,
            &quot;frequency_base&quot;: 1.0,
            &quot;frequency_stem&quot;: 1.0,
            &quot;vector&quot;: [1.0, 2.0, 3.0],
            &quot;synonyms&quot;:
            {
                &quot;bla1&quot;: 0.1,
                &quot;bla2&quot;: 0.2
            },
            &quot;antonyms&quot;:
            {
                &quot;bla3&quot;: 0.1,
                &quot;bla4&quot;: 0.2
            },
            &quot;tags&quot;: &quot;tag1 tag2&quot;,
            &quot;features&quot;:
            {
                &quot;NUM&quot;: &quot;P&quot;,
                &quot;GEN&quot;: &quot;F&quot;
            }
        }
   ]
}'
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;data&quot; : [
      {
         &quot;version&quot; : 1,
         &quot;created&quot; : true,
         &quot;dtype&quot; : &quot;term&quot;,
         &quot;index&quot; : &quot;jenny-en-0&quot;,
         &quot;id&quot; : &quot;&quot;
      },
      {
         &quot;dtype&quot; : &quot;term&quot;,
         &quot;created&quot; : true,
         &quot;version&quot; : 1,
         &quot;id&quot; : &quot;term2&quot;,
         &quot;index&quot; : &quot;jenny-en-0&quot;
      }
   ]
}
</code></pre>

<h3 id="post-termindex_default_synonyms">POST /term/index_default_synonyms</h3>
<p>Index a set of default synonyms provided with starchat.</p>
<h4 id="requirements_41">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_33">Return codes</h4>
<h5 id="200_29">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
GROUP_SIZE=${3:-1000}
curl --max-time 600 -v -H &quot;Authorization: Basic $(echo -n 'admin:adminp4ssw0rd' | base64)&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/term/index_default_synonyms?groupsize=${GROUP_SIZE}&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;message&quot; : &quot;Indexed synonyms, blocks of 1000 items =&gt; success(124) failures(0)&quot;,
   &quot;code&quot; : 100
}
</code></pre>

<h3 id="post-termget">POST /term/get</h3>
<p>Get one or more terms entry.</p>
<h4 id="requirements_42">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_34">Return codes</h4>
<h5 id="200_30">200</h5>
<p>Sample call</p>
<pre><code class="bash">QUERY=${1:-&quot;\&quot;term\&quot;&quot;}
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/term/get -d &quot;{
        \&quot;ids\&quot;: [${QUERY}]
}&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;terms&quot; : [
      {
         &quot;vector&quot; : [
            1,
            2,
            3
         ],
        &quot;frequency_base&quot;: 1.0,
        &quot;frequency_stem&quot;: 1.0,
         &quot;term&quot; : &quot;&quot;,
         &quot;antonyms&quot; : {
            &quot;bla4&quot; : 0.2,
            &quot;bla3&quot; : 0.1
         },
         &quot;features&quot; : {
            &quot;NUM&quot; : &quot;S&quot;,
            &quot;GEN&quot; : &quot;M&quot;
         },
         &quot;synonyms&quot; : {
            &quot;bla2&quot; : 0.2,
            &quot;bla1&quot; : 0.1
         },
         &quot;tags&quot; : &quot;tag1 tag2&quot;
      },
      {
         &quot;antonyms&quot; : {
            &quot;bla3&quot; : 0.1,
            &quot;bla4&quot; : 0.2
         },
         &quot;features&quot; : {
            &quot;NUM&quot; : &quot;P&quot;,
            &quot;GEN&quot; : &quot;F&quot;
         },
         &quot;term&quot; : &quot;term2&quot;,
         &quot;frequency_base&quot;: 1.0,
         &quot;frequency_stem&quot;: 1.0,
         &quot;vector&quot; : [
            1,
            2,
            3
         ],
         &quot;synonyms&quot; : {
            &quot;bla1&quot; : 0.1,
            &quot;bla2&quot; : 0.2
         },
         &quot;tags&quot; : &quot;tag1 tag2&quot;
      }
   ]
}

</code></pre>

<h3 id="delete-term">DELETE /term</h3>
<p>Delete the term.</p>
<h4 id="requirements_43">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_35">Return codes</h4>
<h5 id="200_31">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X DELETE http://localhost:${PORT}/${INDEX_NAME}/term -d '{
        &quot;ids&quot;: [&quot;&quot;, &quot;term2&quot;]
}'
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;data&quot; : [
      {
         &quot;dtype&quot; : &quot;term&quot;,
         &quot;version&quot; : 2,
         &quot;id&quot; : &quot;&quot;,
         &quot;index&quot; : &quot;jenny-en-0&quot;,
         &quot;found&quot; : true
      },
      {
         &quot;dtype&quot; : &quot;term&quot;,
         &quot;id&quot; : &quot;term2&quot;,
         &quot;version&quot; : 2,
         &quot;found&quot; : true,
         &quot;index&quot; : &quot;jenny-en-0&quot;
      }
   ]
}

</code></pre>

<p>Sample call: delete all</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X DELETE http://localhost:${PORT}/${INDEX_NAME}/term -d'{
        &quot;ids&quot;: []
}'
</code></pre>

<p>Sample call: delete all</p>
<pre><code class="json">{
  &quot;message&quot;:&quot;delete&quot;,
  &quot;deleted&quot;:2
}
</code></pre>

<h3 id="put-term">PUT /term</h3>
<p>Update the entry.</p>
<h4 id="requirements_44">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with write permissions on the index</li>
</ul>
<h4 id="return-codes_36">Return codes</h4>
<h5 id="200_32">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:${PORT}/${INDEX_NAME}/term -d '{
    &quot;terms&quot;: [
        {
            &quot;term&quot;: &quot;&quot;,
            &quot;frequency_base&quot;: 1.0,
            &quot;frequency_stem&quot;: 1.0,
            &quot;vector&quot;: [1.2, 2.3, 3.4, 4.5],
            &quot;synonyms&quot;:
            {
                &quot;bla1&quot;: 0.1,
                &quot;bla2&quot;: 0.2
            },
            &quot;antonyms&quot;:
            {
                &quot;term2&quot;: 0.1,
                &quot;bla4&quot;: 0.2
            },
            &quot;tags&quot;: &quot;tag1 tag2&quot;,
            &quot;features&quot;:
            {
                &quot;FEATURE_NEW1&quot;: &quot;V&quot;,
                &quot;GEN&quot;: &quot;M&quot;
            }
        },
        {
            &quot;term&quot;: &quot;term2&quot;,
            &quot;frequency_base&quot;: 1.0,
            &quot;frequency_stem&quot;: 1.0,
            &quot;vector&quot;: [1.6, 2.7, 3.8, 5.9],
            &quot;synonyms&quot;:
            {
                &quot;bla1&quot;: 0.1,
                &quot;bla2&quot;: 0.2
            },
            &quot;antonyms&quot;:
            {
                &quot;bla3&quot;: 0.1,
                &quot;bla4&quot;: 0.2
            },
            &quot;tags&quot;: &quot;tag1 tag2&quot;,
            &quot;features&quot;:
            {
                &quot;FEATURE_NEW1&quot;: &quot;N&quot;,
                &quot;GEN&quot;: &quot;F&quot;
            }
        }
   ]
}'
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;data&quot; : [
      {
         &quot;version&quot; : 2,
         &quot;id&quot; : &quot;&quot;,
         &quot;index&quot; : &quot;jenny-en-0&quot;,
         &quot;created&quot; : false,
         &quot;dtype&quot; : &quot;term&quot;
      },
      {
         &quot;index&quot; : &quot;jenny-en-0&quot;,
         &quot;id&quot; : &quot;term2&quot;,
         &quot;version&quot; : 2,
         &quot;dtype&quot; : &quot;term&quot;,
         &quot;created&quot; : false
      }
   ]
}

</code></pre>

<h3 id="get-termterm">GET /term/term</h3>
<p>Search for term (using Elasticsearch).</p>
<h4 id="requirements_45">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_37">Return codes</h4>
<h5 id="200_33">200</h5>
<p>Sample call</p>
<pre><code class="bash">QUERY=${1:-&quot;term2&quot;}
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET http://localhost:${PORT}/${INDEX_NAME}/term/term -d &quot;{
    \&quot;term\&quot;: \&quot;${QUERY}\&quot;
}&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;hits&quot; : {
      &quot;terms&quot; : [
         {
            &quot;vector&quot; : [
               1.2,
               2.3,
               3.4,
               4.5
            ],
            &quot;antonyms&quot; : {
               &quot;bla4&quot; : 0.2,
               &quot;term2&quot; : 0.1
            },
            &quot;frequency_base&quot;: 1.0,
            &quot;frequency_stem&quot;: 1.0,
            &quot;features&quot; : {
               &quot;FEATURE_NEW1&quot; : &quot;V&quot;,
               &quot;GEN&quot; : &quot;M&quot;
            },
            &quot;score&quot; : 0.6931471824646,
            &quot;tags&quot; : &quot;tag1 tag2&quot;,
            &quot;term&quot; : &quot;&quot;,
            &quot;synonyms&quot; : {
               &quot;bla2&quot; : 0.2,
               &quot;bla1&quot; : 0.1
            }
         }
      ]
   },
   &quot;total&quot; : 1,
   &quot;max_score&quot; : 0.6931471824646
}
</code></pre>

<h3 id="get-termtext">GET /term/text</h3>
<p>Search for all the terms in the text and return the entries.</p>
<h4 id="requirements_46">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_38">Return codes</h4>
<h5 id="200_34">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET http://localhost:${PORT}/${INDEX_NAME}/term/text -d 'term2 '
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;max_score&quot; : 0.6931471824646,
   &quot;hits&quot; : {
      &quot;terms&quot; : [
         {
            &quot;term&quot; : &quot;&quot;,
            &quot;score&quot; : 0.6931471824646,
            &quot;tags&quot; : &quot;tag1 tag2&quot;,
            &quot;vector&quot; : [
               1.2,
               2.3,
               3.4,
               4.5
            ],
            &quot;features&quot; : {
               &quot;GEN&quot; : &quot;M&quot;,
               &quot;FEATURE_NEW1&quot; : &quot;V&quot;
            },
            &quot;antonyms&quot; : {
               &quot;bla4&quot; : 0.2,
               &quot;term2&quot; : 0.1
            },
            &quot;synonyms&quot; : {
               &quot;bla2&quot; : 0.2,
               &quot;bla1&quot; : 0.1
            },
            &quot;frequency_base&quot;: 1.0,
            &quot;frequency_stem&quot;: 1.0
         },
         {
            &quot;term&quot; : &quot;term2&quot;,
            &quot;tags&quot; : &quot;tag1 tag2&quot;,
            &quot;score&quot; : 0.6931471824646,
            &quot;features&quot; : {
               &quot;FEATURE_NEW1&quot; : &quot;N&quot;,
               &quot;GEN&quot; : &quot;F&quot;
            },
            &quot;vector&quot; : [
               1.6,
               2.7,
               3.8,
               5.9
            ],
            &quot;antonyms&quot; : {
               &quot;bla3&quot; : 0.1,
               &quot;bla4&quot; : 0.2
            },
            &quot;frequency_base&quot;: 1.0,
            &quot;frequency_stem&quot;: 1.0,
            &quot;synonyms&quot; : {
               &quot;bla1&quot; : 0.1,
               &quot;bla2&quot; : 0.2
            }
         }
      ]
   },
   &quot;total&quot; : 2
}
</code></pre>

<h2 id="tokenizers">Tokenizers</h2>
<h3 id="get-tokenizers">GET /tokenizers</h3>
<p>Show a list of supported methods for tokenization and stemming</p>
<h4 id="requirements_47">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_39">Return codes</h4>
<h5 id="200_35">200</h5>
<p>Sample call</p>
<pre><code class="bash">PORT=${1:-8888}
INDEX_NAME=${2:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X GET &quot;http://localhost:${PORT}/${INDEX_NAME}/tokenizers&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;shingles2&quot; : &quot;2 words shingles&quot;,
   &quot;shingles3&quot; : &quot;3 words shingles&quot;,
   &quot;shingles2_10&quot; : &quot;from 2 to 10 shingles&quot;,
   &quot;base_stem&quot; : &quot;lowercase + stemming&quot;,
   &quot;base&quot; : &quot;lowercase&quot;,
   &quot;stop&quot; : &quot;lowercase + stopwords elimination&quot;,
   &quot;shingles4&quot; : &quot;4 words shingles&quot;,
   &quot;stop_stem&quot; : &quot;lowercase + stopwords elimination + stemming&quot;
}
</code></pre>

<h3 id="post-tokenizers">POST /tokenizers</h3>
<p>get a list of token using the selected analyzer</p>
<h4 id="requirements_48">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_40">Return codes</h4>
<h5 id="200_36">200</h5>
<p>Sample call</p>
<pre><code class="bash">ANALYZER=${1:-&quot;stop&quot;}
QUERY=${2:-&quot;good morning, may I ask you a question?&quot;}
PORT=${3:-8888}
INDEX_NAME=${4:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/tokenizers&quot; -d &quot;
{
        \&quot;text\&quot;: \&quot;${QUERY}\&quot;,
        \&quot;tokenizer\&quot;: \&quot;${ANALYZER}\&quot;
}&quot;
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;tokens&quot; : [
      {
         &quot;start_offset&quot; : 0,
         &quot;end_offset&quot; : 4,
         &quot;token_type&quot; : &quot;word&quot;,
         &quot;token&quot; : &quot;good&quot;,
         &quot;position&quot; : 0
      },
      {
         &quot;token&quot; : &quot;morning&quot;,
         &quot;position&quot; : 1,
         &quot;token_type&quot; : &quot;word&quot;,
         &quot;end_offset&quot; : 12,
         &quot;start_offset&quot; : 5
      },
      {
         &quot;start_offset&quot; : 14,
         &quot;end_offset&quot; : 17,
         &quot;token_type&quot; : &quot;word&quot;,
         &quot;token&quot; : &quot;may&quot;,
         &quot;position&quot; : 2
      },
      {
         &quot;token_type&quot; : &quot;word&quot;,
         &quot;token&quot; : &quot;i&quot;,
         &quot;position&quot; : 3,
         &quot;start_offset&quot; : 18,
         &quot;end_offset&quot; : 19
      },
      {
         &quot;end_offset&quot; : 23,
         &quot;start_offset&quot; : 20,
         &quot;position&quot; : 4,
         &quot;token&quot; : &quot;ask&quot;,
         &quot;token_type&quot; : &quot;word&quot;
      },
      {
         &quot;end_offset&quot; : 27,
         &quot;start_offset&quot; : 24,
         &quot;position&quot; : 5,
         &quot;token&quot; : &quot;you&quot;,
         &quot;token_type&quot; : &quot;word&quot;
      },
      {
         &quot;end_offset&quot; : 38,
         &quot;start_offset&quot; : 30,
         &quot;token&quot; : &quot;question&quot;,
         &quot;position&quot; : 7,
         &quot;token_type&quot; : &quot;word&quot;
      }
   ]
}
</code></pre>

<h2 id="analyzersplayground">AnalyzersPlayground</h2>
<h3 id="post-analyzers_playground">POST /analyzers_playground</h3>
<p>used to test analyzers on the fly</p>
<h4 id="requirements_49">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
</ul>
<h4 id="return-codes_41">Return codes</h4>
<h5 id="200_37">200</h5>
<p>Sample call keyword</p>
<pre><code class="bash">ANALYZER=${1:-&quot;keyword(\\\&quot;test\\\&quot;)&quot;}
QUERY=${2:-&quot;this is a test&quot;}
DATA=${3:-&quot;{\&quot;item_list\&quot;: [], \&quot;extracted_variables\&quot;:{}}&quot;}
PORT=${4:-8888}
INDEX_NAME=${5:-index_getjenny_english_0}
curl -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:${PORT}/${INDEX_NAME}/analyzers_playground&quot; -d &quot;
{
        \&quot;analyzer\&quot;: \&quot;${ANALYZER}\&quot;,
        \&quot;query\&quot;: \&quot;${QUERY}\&quot;,
        \&quot;data\&quot;: ${DATA}
}&quot;
</code></pre>

<p>Sample output keyword</p>
<pre><code class="json">{
   &quot;build_message&quot; : &quot;success&quot;,
   &quot;build&quot; : true,
   &quot;value&quot; : 0.25
}
</code></pre>

<p>Sample states analyzers</p>
<pre><code class="bash">curl -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H 'Content-Type: application/json' -X POST http://localhost:${PORT}/${INDEX_NAME}/analyzers_playground -d '
{
        &quot;analyzer&quot;: &quot;hasTravState(\&quot;one\&quot;)&quot;,
        &quot;query&quot;: &quot;query&quot;,
        &quot;data&quot;: {&quot;item_list&quot;: [&quot;one&quot;, &quot;two&quot;], &quot;extracted_variables&quot;:{}}
}
'
</code></pre>

<p>Sample output states analyzers</p>
<pre><code class="json">{
   &quot;build_message&quot; : &quot;success&quot;,
   &quot;build&quot; : true,
   &quot;value&quot; : 1
}
</code></pre>

<p>Sample of pattern extraction through analyzers</p>
<pre><code class="bash">curl -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H 'Content-Type: application/json' -X POST http://localhost:${PORT}/${INDEX_NAME}/analyzers_playground -d '
{
        &quot;analyzer&quot;: &quot;band(keyword(\&quot;on\&quot;), matchPatternRegex(\&quot;[day,month,year](?:(0[1-9]|[12][0-9]|3[01])(?:[- \\\/\\.])(0[1-9]|1[012])(?:[- \\\/\\.])((?:19|20)\\d\\d))\&quot;))&quot;,
        &quot;query&quot;: &quot;on 31-11-1900&quot;
}'
</code></pre>

<p>Sample output</p>
<pre><code class="json">{
   &quot;build_message&quot; : &quot;success&quot;,
   &quot;data&quot; : {
      &quot;item_list&quot; : [],
      &quot;extracted_variables&quot; : {
         &quot;month.0&quot; : &quot;11&quot;,
         &quot;year.0&quot; : &quot;1900&quot;,
         &quot;day.0&quot; : &quot;31&quot;
      }
   },
   &quot;value&quot; : 1,
   &quot;build&quot; : true
}
</code></pre>

<h2 id="spellcheck">SpellCheck</h2>
<h3 id="post-spellcheckterms">POST /spellcheck/terms</h3>
<p>terms spellchecker based on knowledgebase text </p>
<h4 id="requirements_50">Requirements</h4>
<ul>
<li>The index must exists</li>
<li>The function requires user credentials with read permissions on the index</li>
<li>the knowledge base must contain data</li>
</ul>
<h4 id="return-codes_42">Return codes</h4>
<h5 id="200_38">200</h5>
<p>Sample call</p>
<pre><code class="bash">QUERY=${1:-&quot;this is a tes for splellchecker&quot;}
PORT=${2:-8888}
INDEX_NAME=${3:-index_getjenny_english_0}
curl -v -H &quot;Authorization: Basic `echo -n 'test_user:p4ssw0rd' | base64`&quot; \
  -H &quot;Content-Type: application/json&quot; -X POST http://localhost:${PORT}/${INDEX_NAME}/spellcheck/terms -d &quot;{
  \&quot;text\&quot;: \&quot;${QUERY}\&quot;,
  \&quot;prefix_length\&quot;: 3,
  \&quot;min_doc_freq\&quot;: 1
}&quot;
</code></pre>

<pre><code class="json">{
   &quot;tokens&quot; : [
      {
         &quot;offset&quot; : 0,
         &quot;options&quot; : [
            {
               &quot;freq&quot; : 1284,
               &quot;score&quot; : 0.800000011920929,
               &quot;text&quot; : &quot;hello&quot;
            },
            {
               &quot;text&quot; : &quot;hella&quot;,
               &quot;score&quot; : 0.800000011920929,
               &quot;freq&quot; : 2
            },
            {
               &quot;freq&quot; : 2,
               &quot;score&quot; : 0.800000011920929,
               &quot;text&quot; : &quot;helle&quot;
            },
            {
               &quot;text&quot; : &quot;help&quot;,
               &quot;score&quot; : 0.75,
               &quot;freq&quot; : 35395
            },
            {
               &quot;score&quot; : 0.75,
               &quot;freq&quot; : 5,
               &quot;text&quot; : &quot;hell&quot;
            }
         ],
         &quot;length&quot; : 5,
         &quot;text&quot; : &quot;hellp&quot;
      },
      {
         &quot;length&quot; : 4,
         &quot;options&quot; : [],
         &quot;offset&quot; : 7,
         &quot;text&quot; : &quot;this&quot;
      },
      {
         &quot;length&quot; : 2,
         &quot;options&quot; : [],
         &quot;offset&quot; : 12,
         &quot;text&quot; : &quot;is&quot;
      },
      {
         &quot;length&quot; : 1,
         &quot;offset&quot; : 15,
         &quot;options&quot; : [],
         &quot;text&quot; : &quot;a&quot;
      },
      {
         &quot;length&quot; : 4,
         &quot;offset&quot; : 17,
         &quot;options&quot; : [
            {
               &quot;text&quot; : &quot;test&quot;,
               &quot;score&quot; : 0.75,
               &quot;freq&quot; : 191
            },
            {
               &quot;freq&quot; : 10,
               &quot;score&quot; : 0.5,
               &quot;text&quot; : &quot;tessa&quot;
            },
            {
               &quot;text&quot; : &quot;tesco&quot;,
               &quot;score&quot; : 0.5,
               &quot;freq&quot; : 9
            },
            {
               &quot;text&quot; : &quot;tesia&quot;,
               &quot;score&quot; : 0.5,
               &quot;freq&quot; : 2
            },
            {
               &quot;freq&quot; : 2,
               &quot;score&quot; : 0.5,
               &quot;text&quot; : &quot;tester&quot;
            }
         ],
         &quot;text&quot; : &quot;tesr&quot;
      }
   ]
}
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
